<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="web前端,React,">










<meta name="description" content="React 背景介绍 React 入门实例教程  React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram 照片墙 的网站。做出来以后，发现这套东西很好用，就在2013年5月开源了。 什么是React A JAVASCRIPT LIBRARY FOR BUILDING USER INTER">
<meta name="keywords" content="web前端,React">
<meta property="og:type" content="article">
<meta property="og:title" content="React笔记">
<meta property="og:url" content="https://guoweiyanggithub.github.io/2019/03/08/React笔记/index.html">
<meta property="og:site_name" content="一昂杨丶">
<meta property="og:description" content="React 背景介绍 React 入门实例教程  React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram 照片墙 的网站。做出来以后，发现这套东西很好用，就在2013年5月开源了。 什么是React A JAVASCRIPT LIBRARY FOR BUILDING USER INTER">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-13T02:46:56.213Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React笔记">
<meta name="twitter:description" content="React 背景介绍 React 入门实例教程  React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 Instagram 照片墙 的网站。做出来以后，发现这套东西很好用，就在2013年5月开源了。 什么是React A JAVASCRIPT LIBRARY FOR BUILDING USER INTER">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://guoweiyanggithub.github.io/2019/03/08/React笔记/">





  <title>React笔记 | 一昂杨丶</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一昂杨丶</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">山中何事？松花酿酒，春水煎茶。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://guoweiyanggithub.github.io/2019/03/08/React笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="一昂杨丶">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/touxiang.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一昂杨丶">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">React笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-08T11:21:14+08:00">
                2019-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/react/" itemprop="url" rel="index">
                    <span itemprop="name">react</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/08/React笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/03/08/React笔记/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/03/08/React笔记/" class="leancloud_visitors" data-flag-title="React笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="React-背景介绍"><a href="#React-背景介绍" class="headerlink" title="React 背景介绍"></a>React 背景介绍</h2><ul>
<li><a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener">React 入门实例教程</a></li>
</ul>
<p>React 起源于 Facebook 的内部项目，因为该公司对市场上所有 JavaScript MVC 框架，都不满意，就决定自己写一套，用来架设 <a href="https://www.instagram.com/" target="_blank" rel="noopener">Instagram 照片墙</a> 的网站。做出来以后，发现这套东西很好用，就在2013年5月开源了。</p>
<h2 id="什么是React"><a href="#什么是React" class="headerlink" title="什么是React"></a>什么是React</h2><ul>
<li>A JAVASCRIPT LIBRARY FOR BUILDING USER INTERFACES<ul>
<li>用来构建UI的 JavaScript库</li>
</ul>
</li>
<li><a href="https://reactjs.org/" target="_blank" rel="noopener">React 官网</a></li>
<li><a href="https://www.reactjscn.com/" target="_blank" rel="noopener">React 中文文档</a></li>
</ul>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>1 通过 JSX语法 实现组件化开发，<strong>为函数式的 UI 编程方式打开了大门</strong></li>
<li>2 性能高的让人称赞：通过 <code>diff算法</code> 和 <code>虚拟DOM</code> 实现视图的高效更新</li>
<li>3 HTML仅仅是个开始</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; JSX --TO--&gt; EveryThing</span><br><span class="line"></span><br><span class="line">- JSX --&gt; HTML</span><br><span class="line">- JSX --&gt; native ios或android中的组件（XML）</span><br><span class="line">- JSX --&gt; VR</span><br><span class="line">- JSX --&gt; 物联网</span><br></pre></td></tr></table></figure>
<h2 id="为什么要用React"><a href="#为什么要用React" class="headerlink" title="为什么要用React"></a>为什么要用React</h2><ul>
<li>1 使用<code>组件化</code>开发方式，符合现代Web开发的趋势</li>
<li>2 技术成熟，社区完善，配件齐全，适用于大型Web项目（生态系统健全）</li>
<li>3 由Facebook专门的团队维护，技术支持可靠</li>
<li>4 ReactNative - Learn once, write anywhere: Build mobile apps with React</li>
<li>5 使用方式简单，性能非常高，支持服务端渲染</li>
<li>6 React非常火，从技术角度，可以满足好奇心，提高技术水平；从职业角度，有利于求职和晋升，有利于参与潜力大的项目</li>
</ul>
<h2 id="React中的核心概念"><a href="#React中的核心概念" class="headerlink" title="React中的核心概念"></a>React中的核心概念</h2><ul>
<li>1 虚拟DOM（Virtual DOM）</li>
<li>2 Diff算法（虚拟DOM的加速器，提升React性能的法宝）</li>
</ul>
<h2 id="虚拟DOM（Vitural-DOM）"><a href="#虚拟DOM（Vitural-DOM）" class="headerlink" title="虚拟DOM（Vitural DOM）"></a>虚拟DOM（Vitural DOM）</h2><blockquote>
<p>React将DOM抽象为虚拟DOM，虚拟DOM其实就是用一个对象来描述DOM，通过对比前后两个对象的差异，最终只把变化的部分重新渲染，提高渲染的效率</p>
</blockquote>
<ul>
<li><a href="https://github.com/livoras/blog/issues/13" target="_blank" rel="noopener">如何实现一个 Virtual DOM 算法</a></li>
<li><a href="https://www.zhihu.com/question/31809713" target="_blank" rel="noopener">理解 Virtual DOM</a></li>
</ul>
<h3 id="VituralDOM的处理方式"><a href="#VituralDOM的处理方式" class="headerlink" title="VituralDOM的处理方式"></a>VituralDOM的处理方式</h3><ul>
<li>1 用 JavaScript 对象结构表示 DOM 树的结构，然后用这个树构建一个真正的 DOM 树，插到文档当中</li>
<li>2 当状态变更的时候，重新构造一棵新的对象树。然后用新的树和旧的树进行比较，记录两棵树差异</li>
<li>3 把2所记录的差异应用到步骤1所构建的真正的DOM树上，视图就更新了</li>
</ul>
<h2 id="Diff算法"><a href="#Diff算法" class="headerlink" title="Diff算法"></a>Diff算法</h2><ul>
<li><a href="https://reactjs.org/docs/reconciliation.html" target="_blank" rel="noopener">Reconciliation diff</a></li>
<li><a href="https://www.reactjscn.com/docs/reconciliation.html" target="_blank" rel="noopener">diff算法 - 中文文档</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/20346379" target="_blank" rel="noopener">不可思议的 react diff</a></li>
<li><a href="https://github.com/zmmbreeze/blog/issues/9" target="_blank" rel="noopener">React diff 算法</a></li>
</ul>
<blockquote>
<p>当你使用React的时候，在某个时间点 render() 函数创建了一棵React元素树，<br>在下一个state或者props更新的时候，render() 函数将创建一棵新的React元素树，<br>React将对比这两棵树的不同之处，计算出如何高效的更新UI（只更新变化的地方）</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">了解：</span><br><span class="line"></span><br><span class="line">有一些解决将一棵树转换为另一棵树的最小操作数算法问题的通用方案。然而，树中元素个数为n，最先进的算法 的时间复杂度为 O(n3) 。</span><br><span class="line">如果直接使用这个算法，在React中展示1000个元素则需要进行10亿次的比较。这操作太过昂贵，相反，React基于两点假设，实现了一个O(n)算法，提升性能：</span><br></pre></td></tr></table></figure>
<ul>
<li>React中有两种假定：<ul>
<li>1 <strong>两个不同类型的元素会产生不同的树</strong></li>
<li>2 <strong>开发者可以通过key属性指定不同树中没有发生改变的子元素</strong></li>
</ul>
</li>
</ul>
<h3 id="Diff算法的说明-1"><a href="#Diff算法的说明-1" class="headerlink" title="Diff算法的说明 - 1"></a>Diff算法的说明 - 1</h3><ul>
<li>如果两棵树的根元素类型不同，React会销毁旧树，创建新树</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧树</span></span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;Counter /&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 新树</span></span><br><span class="line"><span class="regexp">&lt;span&gt;</span></span><br><span class="line"><span class="regexp">  &lt;Counter /</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">执行过程：destory Counter -&gt; insert Counter</span></span><br></pre></td></tr></table></figure>
<h3 id="Diff算法的说明-2"><a href="#Diff算法的说明-2" class="headerlink" title="Diff算法的说明 - 2"></a>Diff算法的说明 - 2</h3><ul>
<li>对于类型相同的React DOM 元素，React会对比两者的属性是否相同，只更新不同的属性</li>
<li>当处理完这个DOM节点，React就会递归处理子节点。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 旧</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"before"</span> <span class="attr">title</span>=<span class="string">"stuff"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">// 新</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"after"</span> <span class="attr">title</span>=<span class="string">"stuff"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">只更新：className 属性</span><br><span class="line"></span><br><span class="line">// 旧</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> '<span class="attr">red</span>', <span class="attr">fontWeight:</span> '<span class="attr">bold</span>'&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">// 新</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;color:</span> '<span class="attr">green</span>', <span class="attr">fontWeight:</span> '<span class="attr">bold</span>'&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">只更新：color属性</span><br></pre></td></tr></table></figure>
<h3 id="Diff算法的说明-3"><a href="#Diff算法的说明-3" class="headerlink" title="Diff算法的说明 - 3"></a>Diff算法的说明 - 3</h3><ul>
<li>1 当在子节点的后面添加一个节点，这时候两棵树的转化工作执行的很好</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧</span></span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;first&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;second&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 新</span></span><br><span class="line"><span class="regexp">&lt;ul&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;first&lt;/</span>li&gt;</span><br><span class="line">  &lt;li&gt;second&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;third&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">执行过程：</span></span><br><span class="line"><span class="regexp">React会匹配新旧两个&lt;li&gt;first&lt;/</span>li&gt;，匹配两个&lt;li&gt;second&lt;<span class="regexp">/li&gt;，然后添加 &lt;li&gt;third&lt;/</span>li&gt; tree</span><br></pre></td></tr></table></figure>
<ul>
<li>2 但是如果你在开始位置插入一个元素，那么问题就来了：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧</span></span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;<span class="number">1</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;2&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 新</span></span><br><span class="line"><span class="regexp">&lt;ul&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;3&lt;/</span>li&gt;</span><br><span class="line">  &lt;li&gt;<span class="number">1</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li&gt;2&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">执行过程：</span></span><br><span class="line"><span class="regexp">React将改变每一个子节点，而非保持 &lt;li&gt;Duke&lt;/</span>li&gt; 和 &lt;li&gt;Villanova&lt;<span class="regexp">/li&gt; 不变</span></span><br></pre></td></tr></table></figure>
<h3 id="key-属性"><a href="#key-属性" class="headerlink" title="key 属性"></a>key 属性</h3><blockquote>
<p>为了解决以上问题，React提供了一个 key 属性。当子节点带有key属性，React会通过key来匹配原始树和后来的树。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 旧</span></span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li key=<span class="string">"2015"</span>&gt;<span class="number">1</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li key="2016"&gt;2&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 新</span></span><br><span class="line"><span class="regexp">&lt;ul&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li key="2014"&gt;3&lt;/</span>li&gt;</span><br><span class="line">  &lt;li key=<span class="string">"2015"</span>&gt;<span class="number">1</span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">  &lt;li key="2016"&gt;2&lt;/</span>li&gt;</span><br><span class="line">&lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">执行过程：</span></span><br><span class="line"><span class="regexp">现在 React 知道带有key '2014' 的元素是新的，对于 '2015' 和 '2016' 仅仅移动位置即可</span></span><br></pre></td></tr></table></figure>
<ul>
<li>说明：key属性在React内部使用，但不会传递给你的组件</li>
<li>推荐：在遍历数据时，推荐在组件中使用 key 属性：<code>&lt;li key={item.id}&gt;{item.name}&lt;/li&gt;</code></li>
<li>注意：<strong>key只需要保持与他的兄弟节点唯一即可，不需要全局唯一</strong></li>
<li>注意：<strong>尽可能的减少数组index作为key，数组中插入元素的等操作时，会使得效率底下</strong></li>
</ul>
<h3 id="key-demo"><a href="#key-demo" class="headerlink" title="key demo"></a>key demo</h3><ul>
<li><p>执行过程：B != A，则创建并插入 B，删除 A；以此类推，创建并插入 A、D、C，删除 B、C、D</p>
</li>
<li><p>执行过程：B、D 不做任何操作，A、C 进行移动操作</p>
</li>
</ul>
<hr>
<h2 id="React的基本使用"><a href="#React的基本使用" class="headerlink" title="React的基本使用"></a>React的基本使用</h2><ul>
<li>安装：<code>npm i -S react react-dom</code></li>
<li><code>react</code>：react 是React库的入口点</li>
<li><code>react-dom</code>：提供了针对DOM的方法，比如：把创建的虚拟DOM，渲染到页面上</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入 react</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">'react-dom'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 创建 虚拟DOM</span></span><br><span class="line"><span class="keyword">const</span> divVD = React.createElement(<span class="string">'div'</span>, &#123;</span><br><span class="line">  title: <span class="string">'hello react'</span></span><br><span class="line">&#125;, <span class="string">'Hello React！！！'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 渲染</span></span><br><span class="line">ReactDOM.render(divVD, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="API说明"><a href="#API说明" class="headerlink" title="API说明"></a>API说明</h3><ul>
<li>createElement()：知道即可</li>
<li>render()</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://reactjs.org/docs/react-api.html</span></span><br><span class="line"><span class="comment">// 作用：根据指定的参数，创建react对象</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 第一个参数：指定创建虚拟DOM的类型</span></span><br><span class="line"><span class="comment">//  类型：string 或者 react组件</span></span><br><span class="line"><span class="comment">//  1 任意字符串类型的标签名称，比如：'div' / 'span'</span></span><br><span class="line"><span class="comment">//  2 react组件类型，比如：&lt;Welcome&gt;&lt;/Welcome&gt;</span></span><br><span class="line"><span class="comment">// 第二个参数：指定元素自身的属性</span></span><br><span class="line"><span class="comment">//  类型：对象或者null</span></span><br><span class="line"><span class="comment">// 第三个参数：当前元素的子元素</span></span><br><span class="line"><span class="comment">//  类型：string 或者 createElement() 的返回值</span></span><br><span class="line"><span class="comment">// 返回值：react对象</span></span><br><span class="line">React.createElement(</span><br><span class="line">  type,</span><br><span class="line">  [props],</span><br><span class="line">  [...children]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://reactjs.org/docs/react-dom.html</span></span><br><span class="line"><span class="comment">// 作用：渲染react元素</span></span><br><span class="line"><span class="comment">// 第一个参数：指定要渲染的react对象</span></span><br><span class="line"><span class="comment">// 第二个参数：指定渲染到页面中的容器（DOM对象）</span></span><br><span class="line"><span class="comment">// 第三个参数：回调函数</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  element,</span><br><span class="line">  container</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="createElement-的问题"><a href="#createElement-的问题" class="headerlink" title="createElement()的问题"></a>createElement()的问题</h3><ul>
<li>说明：<code>createElement()</code>方式，代码编写不友好，太复杂</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dv = React.createElement(</span><br><span class="line">  <span class="string">"div"</span>,</span><br><span class="line">  &#123; <span class="attr">className</span>: <span class="string">"shopping-list"</span> &#125;,</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">"h1"</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="string">"Shopping List for "</span></span><br><span class="line">  ),</span><br><span class="line">  React.createElement(</span><br><span class="line">    <span class="string">"ul"</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    React.createElement(</span><br><span class="line">      <span class="string">"li"</span>,</span><br><span class="line">      <span class="literal">null</span>,</span><br><span class="line">      <span class="string">"Instagram"</span></span><br><span class="line">    ),</span><br><span class="line">    React.createElement(</span><br><span class="line">      <span class="string">"li"</span>,</span><br><span class="line">      <span class="literal">null</span>,</span><br><span class="line">      <span class="string">"WhatsApp"</span></span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"><span class="comment">// 渲染</span></span><br><span class="line">ReactDOM.render(dv, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="JSX-的基本使用"><a href="#JSX-的基本使用" class="headerlink" title="JSX 的基本使用"></a>JSX 的基本使用</h3><ul>
<li>注意：JSX语法，最终会被编译为 createElement() 方法</li>
<li><p>推荐：<strong>使用 JSX 的方式创建组件</strong></p>
</li>
<li><p>JSX - JavaScript XML</p>
</li>
<li>安装：<code>npm i -D babel-preset-react</code> （依赖与：babel-core/babel-loader）<blockquote>
<p>注意：JSX的语法需要通过 babel-preset-react 编译后，才能被解析执行</p>
</blockquote>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 1 在 .babelrc 开启babel对 JSX 的转换 */</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"presets"</span>: [</span><br><span class="line">    <span class="string">"env"</span>, <span class="string">"react"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 2 webpack.config.js */</span></span><br><span class="line"><span class="built_in">module</span>: [</span><br><span class="line">  rules: [</span><br><span class="line">    &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">'babel-loader'</span>, <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 3 在 js 文件中 使用 JSX */</span></span><br><span class="line"><span class="keyword">const</span> dv = (</span><br><span class="line">  &lt;div title=<span class="string">"标题"</span> className=<span class="string">"cls container"</span>&gt;Hello JSX!<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 4 渲染 JSX 到页面中 */</span></span><br><span class="line">ReactDOM.render(dv, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>))</span><br></pre></td></tr></table></figure>
<h2 id="JSX的注意点"><a href="#JSX的注意点" class="headerlink" title="JSX的注意点"></a>JSX的注意点</h2><ul>
<li>注意 1: 如果在 JSX 中给元素添加类, 需要使用 <code>className</code> 代替 class<ul>
<li>类似：label 的 for属性，使用<code>htmlFor</code>代替</li>
</ul>
</li>
<li>注意 2：在 JSX 中可以直接使用 JS代码，直接在 JSX 中通过 {} 中间写 JS代码即可</li>
<li>注意 3：在 JSX 中<strong>只能使用表达式</strong>，但是不能出现 语句！！！</li>
<li>注意 4：在 JSX 中注释语法：<code>{/* 中间是注释的内容 */}</code></li>
</ul>
<h2 id="React组件"><a href="#React组件" class="headerlink" title="React组件"></a>React组件</h2><blockquote>
<p>React 组件可以让你把UI分割为独立、可复用的片段，并将每一片段视为相互独立的部分。</p>
</blockquote>
<ul>
<li>组件是由一个个的HTML元素组成的</li>
<li>概念上来讲, 组件就像JS中的函数。它们接受用户输入（<code>props</code>），并且<strong>返回</strong>一个React对象，用来描述展示在页面中的内容</li>
</ul>
<h3 id="React创建组件的两种方式"><a href="#React创建组件的两种方式" class="headerlink" title="React创建组件的两种方式"></a>React创建组件的两种方式</h3><ul>
<li>1 通过 JS函数 创建（无状态组件）</li>
<li>2 通过 class 创建（有状态组件）</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">函数式组件 和 class 组件的使用场景说明：</span><br><span class="line">1 如果一个组件仅仅是为了展示数据，那么此时就可以使用 函数组件</span><br><span class="line">2 如果一个组件中有一定业务逻辑，需要操作数据，那么就需要使用 class 创建组件，因此，此时需要使用 state</span><br></pre></td></tr></table></figure>
<h4 id="JavaScript函数创建"><a href="#JavaScript函数创建" class="headerlink" title="JavaScript函数创建"></a>JavaScript函数创建</h4><ul>
<li>注意：1 函数名称必须为大写字母开头，React通过这个特点来判断是不是一个组件</li>
<li>注意：2 函数必须有返回值，返回值可以是：JSX对象或<code>null</code></li>
<li>注意：3 返回的JSX，必须有<em>一个</em>根元素</li>
<li>注意：4 组件的返回值使用<code>()</code>包裹，避免换行问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"shopping-list"</span>&gt;</span><br><span class="line">      &#123;<span class="comment">/* 注释的写法 */</span>&#125;</span><br><span class="line">      &lt;h1&gt;Shopping List <span class="keyword">for</span> &#123;props.name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;li&gt;Instagram&lt;/</span>li&gt;</span><br><span class="line">        &lt;li&gt;WhatsApp&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/u</span>l&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  &lt;Welcome name="jack" /</span>&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="class创建"><a href="#class创建" class="headerlink" title="class创建"></a>class创建</h4><ul>
<li>注意：基于 <code>ES6</code> 中的class，需要配合 <code>babel</code> 将代码转化为浏览器识别的ES5语法</li>
<li>安装：<code>npm i -D babel-preset-env</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"shopping-list"</span>&gt;</span><br><span class="line">        &lt;h1&gt;Shopping List <span class="keyword">for</span> &#123;<span class="keyword">this</span>.props.name&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;ul&gt;</span></span><br><span class="line"><span class="regexp">          &lt;li&gt;Instagram&lt;/</span>li&gt;</span><br><span class="line">          &lt;li&gt;WhatsApp&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/u</span>l&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="给组件传递数据-父子组件传递数据"><a href="#给组件传递数据-父子组件传递数据" class="headerlink" title="给组件传递数据 - 父子组件传递数据"></a>给组件传递数据 - 父子组件传递数据</h2><ul>
<li>组件中有一个 <code>只读的对象</code> 叫做 <code>props</code>，无法给props添加属性</li>
<li>获取方式：函数参数 <code>props</code></li>
<li>作用：将传递给组件的属性转化为 <code>props</code> 对象中的属性</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  <span class="comment">// props ---&gt; &#123; username: 'zs', age: 20 &#125;</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;Welcome React&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;h3&gt;姓名：&#123;props.username&#125;----年龄是：&#123;props.age&#125;&lt;/</span>h3&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 给 Hello组件 传递 props：username 和 age</span></span><br><span class="line"><span class="regexp">ReactDOM.reander(&lt;Hello username="zs" age=&#123;20&#125;&gt;&lt;/</span>Hello&gt;, ......)</span><br></pre></td></tr></table></figure>
<h2 id="封装组件到独立的文件中"><a href="#封装组件到独立的文件中" class="headerlink" title="封装组件到独立的文件中"></a>封装组件到独立的文件中</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./components/Hello2.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 引入React模块</span></span><br><span class="line"><span class="comment">// 由于 JSX 编译后会调用 React.createElement 方法，所以在你的 JSX 代码中必须首先声明 React 变量。</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用function构造函数创建组件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hello2</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;这是Hello2组件&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;h1&gt;这是大大的H1标签，我大，我骄傲！！！&lt;/</span>h1&gt;</span><br><span class="line">      &lt;h6&gt;这是小小的h6标签，我小，我傲娇！！！&lt;<span class="regexp">/h6&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 导出组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Hello2</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="comment">// 使用组件：</span></span><br><span class="line"><span class="keyword">import</span> Hello2 <span class="keyword">from</span> <span class="string">'./components/Hello2'</span></span><br></pre></td></tr></table></figure>
<h2 id="props和state"><a href="#props和state" class="headerlink" title="props和state"></a>props和state</h2><h3 id="props"><a href="#props" class="headerlink" title="props"></a>props</h3><ul>
<li>作用：<strong>给组件传递数据，一般用在父子组件之间</strong></li>
<li>说明：React把传递给组件的属性转化为一个对象并交给 <code>props</code></li>
<li>特点：<code>props</code>是只读的，无法给<code>props</code>添加或修改属性</li>
<li><code>props.children</code>：获取组件的内容，比如：<ul>
<li><code>&lt;Hello&gt;组件内容&lt;/Hello&gt;</code> 中的 <code>组件内容</code></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// props 是一个包含数据的对象参数，不要试图修改 props 参数</span></span><br><span class="line"><span class="comment">// 返回值：react元素</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 返回的 react元素中必须只有一个根元素</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3><ul>
<li>作用：用来给组件提供<code>组件内部</code>使用的数据</li>
<li>注意：只有通过<code>class</code>创建的组件才具有状态</li>
<li>注意：<strong>状态是私有的，完全由组件来控制</strong></li>
<li>注意：不要在 <code>state</code> 中添加 <code>render()</code> 方法中不需要的数据，会影响渲染性能！<ul>
<li>可以将组件内部使用但是不渲染在视图中的内容，直接添加给 this</li>
</ul>
</li>
<li>注意：不要在 <code>render()</code> 方法中调用 setState() 方法来修改<code>state</code>的值<ul>
<li>但是可以通过 <code>this.state.name = &#39;rose&#39;</code> 方式设置state（不推荐!!!!）</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hello</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      gender: <span class="string">'male'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;性别：&#123; <span class="keyword">this</span>.state.gender &#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="JSX语法转化过程"><a href="#JSX语法转化过程" class="headerlink" title="JSX语法转化过程"></a>JSX语法转化过程</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX</span></span><br><span class="line"><span class="keyword">const</span> element = (</span><br><span class="line">  &lt;h1 className=<span class="string">"greeting"</span>&gt;</span><br><span class="line">    Hello, world!</span><br><span class="line">  &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ JSX -&gt; createElement</span></span><br><span class="line"><span class="regexp">const element = React.createElement(</span></span><br><span class="line"><span class="regexp">  'h1',</span></span><br><span class="line"><span class="regexp">  &#123;className: 'greeting'&#125;,</span></span><br><span class="line"><span class="regexp">  'Hello, world!'</span></span><br><span class="line"><span class="regexp">)</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ React elements: 使用对象的形式描述页面结构</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ Note: 这是简化后的对象结构</span></span><br><span class="line"><span class="regexp">const element = &#123;</span></span><br><span class="line"><span class="regexp">  tagName: 'h1',</span></span><br><span class="line"><span class="regexp">  props: &#123;</span></span><br><span class="line"><span class="regexp">    className: 'greeting',</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp">  children: ['Hello, world']</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ HTML</span></span><br><span class="line"><span class="regexp">&lt;h1 class="greeting"&gt;</span></span><br><span class="line"><span class="regexp">  Hello, world!</span></span><br><span class="line"><span class="regexp">&lt;/</span>h1&gt;</span><br></pre></td></tr></table></figure>
<h2 id="评论列表案例"><a href="#评论列表案例" class="headerlink" title="评论列表案例"></a>评论列表案例</h2><ul>
<li>巩固有状态组件和无状态组件的使用</li>
<li>两个组件：<code>&lt;CommentList&gt;&lt;/CommentList&gt;</code> 和 <code>&lt;Comment&gt;&lt;/Comment&gt;</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; <span class="attr">user</span>: <span class="string">'张三'</span>, <span class="attr">content</span>: <span class="string">'哈哈，沙发'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: <span class="string">'张三2'</span>, <span class="attr">content</span>: <span class="string">'哈哈，板凳'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: <span class="string">'张三3'</span>, <span class="attr">content</span>: <span class="string">'哈哈，凉席'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: <span class="string">'张三4'</span>, <span class="attr">content</span>: <span class="string">'哈哈，砖头'</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">user</span>: <span class="string">'张三5'</span>, <span class="attr">content</span>: <span class="string">'哈哈，楼下山炮'</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 属性扩散</span></span><br><span class="line">&lt;Comment &#123;...item&#125; key=&#123;i&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Comment</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="style样式"><a href="#style样式" class="headerlink" title="style样式"></a>style样式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 直接写行内样式：</span></span><br><span class="line">&lt;li style=&#123;&#123;<span class="attr">border</span>:<span class="string">'1px solid red'</span>, <span class="attr">fontSize</span>:<span class="string">'12px'</span>&#125;&#125;&gt;<span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 抽离为对象形式</span></span><br><span class="line"><span class="keyword">var</span> styleH3 = &#123;<span class="attr">color</span>:<span class="string">'blue'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> styleObj = &#123;</span><br><span class="line">  liStyle:&#123;<span class="attr">border</span>:<span class="string">'1px solid red'</span>, <span class="attr">fontSize</span>:<span class="string">'12px'</span>&#125;,</span><br><span class="line">  h3Style:&#123;<span class="attr">color</span>:<span class="string">'green'</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;li style=&#123;styleObj.liStyle&#125;&gt;</span><br><span class="line">  &lt;h3 style=&#123;styleObj.h3Style&#125;&gt;评论内容：&#123;props.content&#125;&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>li&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 使用样式表定义样式：</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../css/comment.css'</span></span><br><span class="line">&lt;p className=<span class="string">"pUser"</span>&gt;评论人：&#123;props.user&#125;&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h2><ul>
<li><a href="http://www.cnblogs.com/tim100/p/6050514.html" target="_blank" rel="noopener">React数据流和组件间的沟通总结</a></li>
<li><a href="https://segmentfault.com/q/1010000005876655/a-1020000005876751" target="_blank" rel="noopener">单向数据流和双向绑定各有什么优缺点？</a></li>
<li><a href="https://www.zhihu.com/question/29504639?sort=created" target="_blank" rel="noopener">怎么更好的理解虚拟DOM?</a></li>
<li><a href="https://discountry.github.io/react/" target="_blank" rel="noopener">React中文文档</a></li>
<li><a href="http://blog.csdn.net/yczz/article/details/49886061" target="_blank" rel="noopener">React 源码剖析系列 － 不可思议的 react diff</a></li>
<li><a href="http://www.infoq.com/cn/articles/react-dom-diff?from=timeline&amp;isappinstalled=0" target="_blank" rel="noopener">深入浅出React（四）：虚拟DOM Diff算法解析</a></li>
</ul>
<h2 id="ES6中class关键字的使用"><a href="#ES6中class关键字的使用" class="headerlink" title="ES6中class关键字的使用"></a>ES6中class关键字的使用</h2><ul>
<li><strong>ES6中的所有的代码都是运行在严格模式中的</strong></li>
<li>1 它是用来定义类的，是ES6中实现面向对象编程的新方式</li>
<li>2 使用<code>static</code>关键字定义静态属性</li>
<li>3 使用<code>constructor</code>构造函数，创建实例属性</li>
<li><a href="http://es6.ruanyifeng.com/#docs/class" target="_blank" rel="noopener">class 关键字</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age)&#123;</span><br><span class="line">    <span class="comment">// 实例属性</span></span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态属性</span></span><br><span class="line">Person.staticName = <span class="string">'静态属性'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Person(<span class="number">19</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>在class中定义方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实例方法</span></span><br><span class="line">sayHello () &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'大家好，我今年'</span> + <span class="keyword">this</span>.age + <span class="string">'了'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 静态方法</span></span><br><span class="line"><span class="keyword">static</span> wangwang () &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'我是小明，我新get了一个技能，会暖床'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>实现继承的方式</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">American</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// 必须调用super(), super表示父类的构造函数</span></span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.skin = <span class="string">'white'</span></span><br><span class="line">    <span class="keyword">this</span>.eyeColor = <span class="string">'white'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="react-生命周期"><a href="#react-生命周期" class="headerlink" title="react 生命周期"></a>react 生命周期</h1><h2 id="组件的生命周期"><a href="#组件的生命周期" class="headerlink" title="组件的生命周期"></a>组件的生命周期</h2><ul>
<li>简单说：<strong>一个组件从开始到最后消亡所经历的各种状态，就是一个组件的生命周期</strong></li>
</ul>
<p>组件生命周期函数的定义：从组件被创建，到组件挂载到页面上运行，再到页面关闭组件被卸载，这三个阶段总是伴随着组件各种各样的事件，那么这些事件，统称为组件的生命周期函数！</p>
<ul>
<li><p>通过这个函数，能够让开发人员的代码，参与到组件的生命周期中。也就是说，通过钩子函数，就可以控制组件的行为</p>
</li>
<li><p><a href="https://www.reactjscn.com/docs/react-component.html" target="_blank" rel="noopener">react component</a></p>
</li>
<li><a href="http://www.race604.com/react-native-component-lifecycle/" target="_blank" rel="noopener">React Native 中组件的生命周期</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/20312691?refer=purerender" target="_blank" rel="noopener">React 生命周期的管理艺术</a></li>
<li><a href="http://www.jianshu.com/p/9e427e04135e" target="_blank" rel="noopener">智能组件和木偶组件</a></li>
</ul>
<h3 id="组件生命周期函数总览"><a href="#组件生命周期函数总览" class="headerlink" title="组件生命周期函数总览"></a>组件生命周期函数总览</h3><ul>
<li>说明：通过 <code>Counter计数器的小案例</code>，理解组件的生命周期函数基本使用</li>
<li><p>组件的生命周期包含三个阶段：创建阶段（Mounting）、运行和交互阶段（Updating）、卸载阶段（Unmounting）</p>
</li>
<li><p>Mounting：</p>
<blockquote>
<p>constructor()<br>componentWillMount()<br>render()<br>componentDidMount()</p>
</blockquote>
</li>
<li><p>Updating</p>
<blockquote>
<p>componentWillReceiveProps()<br>shouldComponentUpdate()<br>componentWillUpdate()<br>render()<br>componentDidUpdate()</p>
</blockquote>
</li>
<li><p>Unmounting</p>
<blockquote>
<p>componentWillUnmount()</p>
</blockquote>
</li>
</ul>
<h3 id="组件生命周期-创建阶段-Mounting"><a href="#组件生命周期-创建阶段-Mounting" class="headerlink" title="组件生命周期 - 创建阶段(Mounting)"></a>组件生命周期 - 创建阶段(Mounting)</h3><ul>
<li>特点：该阶段的函数只执行一次</li>
</ul>
<h4 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor()"></a>constructor()</h4><ul>
<li>作用：1 获取props 2 初始化state</li>
<li>说明：通过 <code>constructor()</code> 的参数<code>props</code>获取</li>
<li><a href="https://www.reactjscn.com/docs/react-without-es6.html" target="_blank" rel="noopener">设置state和props</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="comment">// 获取 props</span></span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="comment">// 初始化 state</span></span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      count: props.initCount</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化 props</span></span><br><span class="line"><span class="comment">// 语法：通过静态属性 defaultProps 来初始化props</span></span><br><span class="line">Greeting.defaultProps = &#123;</span><br><span class="line">  initCount: <span class="number">0</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="componentWillMount"><a href="#componentWillMount" class="headerlink" title="componentWillMount()"></a>componentWillMount()</h4><ul>
<li>说明：组件被挂载到页面之前调用，其在render()之前被调用，因此在这方法里<code>同步</code>地设置状态将不会触发重渲染</li>
<li>说明：1 可以调用 <code>setState()</code> 方法来改变状态值</li>
<li>注意：2 无法获取页面中的DOM对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">componentWillMount() &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>)) <span class="comment">// null</span></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    count: <span class="keyword">this</span>.state.count + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="render"><a href="#render" class="headerlink" title="render()"></a>render()</h4><ul>
<li>作用：渲染组件到页面中，无法获取页面中的DOM对象</li>
<li>注意：<strong>不要在render方法中调用 <code>setState()</code> 方法，否则会递归渲染</strong><ul>
<li>原因说明：状态改变会重新调用<code>render()</code>，<code>render()</code>又重新改变状态</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>)) <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button id=<span class="string">"btn"</span> onClick=&#123;<span class="keyword">this</span>.handleAdd&#125;&gt;打豆豆一次&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &#123;</span></span><br><span class="line"><span class="regexp">        this.state.count === 4</span></span><br><span class="line"><span class="regexp">        ? null</span></span><br><span class="line"><span class="regexp">        : &lt;CounterChild initCount=&#123;this.state.count&#125;&gt;&lt;/</span>CounterChild&gt;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount()"></a>componentDidMount()</h4><ul>
<li>1 组件已经挂载到页面中</li>
<li>2 可以进行DOM操作，比如：获取到组件内部的DOM对象</li>
<li>3 可以<strong>发送请求</strong>获取数据</li>
<li>4 可以通过 <code>setState()</code> 修改状态的值</li>
<li>注意：在该方法里设置状态将会触发重渲</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="comment">// 此时，就可以获取到组件内部的DOM对象</span></span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="string">'componentDidMount'</span>, <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="组件生命周期-运行阶段（Updating）"><a href="#组件生命周期-运行阶段（Updating）" class="headerlink" title="组件生命周期 - 运行阶段（Updating）"></a>组件生命周期 - 运行阶段（Updating）</h3><ul>
<li>特点：该阶段的函数执行多次</li>
<li>说明：每当组件的<code>props</code>或者<code>state</code>改变的时候，都会触发运行阶段的函数</li>
</ul>
<h4 id="componentWillReceiveProps"><a href="#componentWillReceiveProps" class="headerlink" title="componentWillReceiveProps()"></a>componentWillReceiveProps()</h4><ul>
<li>说明：组件接受到新的<code>props</code>前触发这个方法</li>
<li>参数：当前组件<code>props</code>值</li>
<li>可以通过 <code>this.props</code> 获取到上一次的值</li>
<li>使用：若你需要响应属性的改变，可以通过对比<code>this.props</code>和<code>nextProps</code>并在该方法中使用<code>this.setState()</code>处理状态改变</li>
<li>注意：修改<code>state</code>不会触发该方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="string">'componentWillReceiveProps'</span>, nextProps)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate()"></a>shouldComponentUpdate()</h4><ul>
<li>作用：根据这个方法的返回值决定是否重新渲染组件，返回<code>true</code>重新渲染，否则不渲染</li>
<li>优势：通过某个条件渲染组件，降低组件渲染频率，提升组件性能</li>
<li>说明：如果返回值为<code>false</code>，那么，后续<code>render()</code>方法不会被调用</li>
<li>注意：<strong>这个方法必须返回布尔值！！！</strong></li>
<li>参数：<ul>
<li>第一个参数：最新属性对象</li>
<li>第二个参数：最新状态对象</li>
</ul>
</li>
<li>场景：根据随机数决定是否渲染组件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="string">'shouldComponentUpdate'</span>, nextProps, nextState)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> nextState.count % <span class="number">2</span> === <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="componentWillUpdate"><a href="#componentWillUpdate" class="headerlink" title="componentWillUpdate()"></a>componentWillUpdate()</h4><ul>
<li>作用：组件将要更新</li>
<li>参数：最新的属性和状态对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentWillUpdate(nextProps, nextState) &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="string">'componentWillUpdate'</span>, nextProps, nextState)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="render-渲染"><a href="#render-渲染" class="headerlink" title="render() 渲染"></a>render() 渲染</h4><ul>
<li>作用：重新渲染组件，与<code>Mounting</code>阶段的<code>render</code>是同一个函数</li>
<li>注意：这个函数能够执行多次，只要组件的属性或状态改变了，这个方法就会重新执行</li>
</ul>
<h4 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate()"></a>componentDidUpdate()</h4><ul>
<li>作用：组件已经被更新</li>
<li>参数：旧的属性和状态对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentDidUpdate(prevProps, prevState) &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="string">'componentDidUpdate'</span>, prevProps, prevState)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="组件生命周期-卸载阶段（Unmounting）"><a href="#组件生命周期-卸载阶段（Unmounting）" class="headerlink" title="组件生命周期 - 卸载阶段（Unmounting）"></a>组件生命周期 - 卸载阶段（Unmounting）</h3><ul>
<li>组件销毁阶段：组件卸载期间，函数比较单一，只有一个函数，这个函数也有一个显著的特点：组件一辈子只能执行依次！</li>
<li>使用说明：只要组件不再被渲染到页面中，那么这个方法就会被调用（ 渲染到页面中 -&gt; 不再渲染到页面中 ）</li>
</ul>
<h4 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount()"></a>componentWillUnmount()</h4><ul>
<li>作用：在卸载组件的时候，执行清理工作，比如<ul>
<li>1 清除定时器</li>
<li>2 清除<code>componentDidMount</code>创建的DOM对象</li>
</ul>
</li>
</ul>
<hr>
<h2 id="React-createReactClass（知道）"><a href="#React-createReactClass（知道）" class="headerlink" title="React - createReactClass（知道）"></a>React - createReactClass（知道）</h2><ul>
<li><strong><code>React.createClass({})</code> 方式，创建有状态组件，该方式已经被废弃！！！</strong></li>
<li>通过导入 <code>require(&#39;create-react-class&#39;)</code>，可以在不适用ES6的情况下，创建有状态组件</li>
<li>getDefaultProps() 和 getInitialState() 方法：是 <code>createReactClass()</code> 方式创建组件中的两个函数</li>
<li><a href="https://reactjs.org/docs/react-without-es6.html#declaring-default-props" target="_blank" rel="noopener">React without ES6</a></li>
<li><a href="https://www.reactjscn.com/docs/react-without-es6.html" target="_blank" rel="noopener">React 不使用ES6</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createReactClass = <span class="built_in">require</span>(<span class="string">'create-react-class'</span>);</span><br><span class="line"><span class="keyword">var</span> Greeting = createReactClass(&#123;</span><br><span class="line">  <span class="comment">// 初始化 props</span></span><br><span class="line">  getDefaultProps: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'getDefaultProps'</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title: <span class="string">'Basic counter!!!'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化 state</span></span><br><span class="line">  getInitialState: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'getInitialState'</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  render: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render'</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;&#123;<span class="keyword">this</span>.props.title&#125;&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;&#123;this.state.count&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;input type=<span class="string">'button'</span> value=<span class="string">'+'</span> onClick=&#123;<span class="keyword">this</span>.handleIncrement&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  handleIncrement: function() &#123;</span></span><br><span class="line"><span class="regexp">    var newCount = this.state.count + 1;</span></span><br><span class="line"><span class="regexp">    this.setState(&#123;count: newCount&#125;);</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  propTypes: &#123;</span></span><br><span class="line"><span class="regexp">    title: React.PropTypes.string</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ReactDOM.render(</span></span><br><span class="line"><span class="regexp">  React.createElement(Greeting),</span></span><br><span class="line"><span class="regexp">  document.getElementById('app')</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure>
<h2 id="state和setState"><a href="#state和setState" class="headerlink" title="state和setState"></a>state和setState</h2><ul>
<li>注意：使用 <code>setState()</code> 方法修改状态，状态改变后，React会重新渲染组件</li>
<li>注意：不要直接修改state属性的值，这样不会重新渲染组件！！！</li>
<li>使用：1 初始化state 2 setState修改state</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改state（不推荐使用）</span></span><br><span class="line"><span class="comment">// https://www.reactjscn.com/docs/state-and-lifecycle.html#不要直接更新状态</span></span><br><span class="line"><span class="keyword">this</span>.state.test = <span class="string">'这样方式，不会重新渲染组件'</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">  <span class="keyword">super</span>(props)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 正确姿势！！！</span></span><br><span class="line">  <span class="comment">// -------------- 初始化 state --------------</span></span><br><span class="line">  <span class="keyword">this</span>.state = &#123;</span><br><span class="line">    count: props.initCount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">componentWillMount() &#123;</span><br><span class="line">  <span class="comment">// -------------- 修改 state 的值 --------------</span></span><br><span class="line">  <span class="comment">// 方式一：</span></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    count: <span class="keyword">this</span>.state.count + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    count: <span class="keyword">this</span>.state.count + <span class="number">1</span></span><br><span class="line">  &#125;, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 由于 setState() 是异步操作，所以，如果想立即获取修改后的state</span></span><br><span class="line">    <span class="comment">// 需要在回调函数中获取</span></span><br><span class="line">    <span class="comment">// https://www.reactjscn.com/docs/react-component.html#setstate</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 方式二：</span></span><br><span class="line">  <span class="keyword">this</span>.setState(<span class="function"><span class="keyword">function</span>(<span class="params">prevState, props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      counter: prevState.counter + props.increment</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 或者 - 注意： =&gt; 后面需要带有小括号，因为返回的是一个对象</span></span><br><span class="line">  <span class="keyword">this</span>.setState(<span class="function">(<span class="params">prevState, props</span>) =&gt;</span> (&#123;</span><br><span class="line">    counter: prevState.counter + props.increment</span><br><span class="line">  &#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="组件绑定事件"><a href="#组件绑定事件" class="headerlink" title="组件绑定事件"></a>组件绑定事件</h2><ul>
<li>1 通过React事件机制 <code>onClick</code> 绑定</li>
<li>2 JS原生方式绑定（通过 <code>ref</code> 获取元素）<ul>
<li>注意：<code>ref</code> 是React提供的一个特殊属性</li>
<li><code>ref</code>的使用说明：<a href="https://reactjscn.com/docs/refs-and-the-dom.html" target="_blank" rel="noopener">react ref</a></li>
</ul>
</li>
</ul>
<h3 id="React中的事件机制-推荐"><a href="#React中的事件机制-推荐" class="headerlink" title="React中的事件机制 - 推荐"></a>React中的事件机制 - 推荐</h3><ul>
<li>注意：事件名称采用驼峰命名法</li>
<li>例如：<code>onClick</code> 用来绑定单击事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"button"</span> value=<span class="string">"触发单击事件"</span></span><br><span class="line">  onClick=&#123;<span class="keyword">this</span>.handleCountAdd&#125;</span><br><span class="line">  onMouseEnter=&#123;<span class="keyword">this</span>.handleMouseEnter&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JS原生方式-知道即可"><a href="#JS原生方式-知道即可" class="headerlink" title="JS原生方式 - 知道即可"></a>JS原生方式 - 知道即可</h3><ul>
<li>说明：给元素添加 <code>ref</code> 属性，然后，获取元素绑定事件</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSX</span></span><br><span class="line"><span class="comment">// 将当前DOM的引用赋值给 this.txtInput 属性</span></span><br><span class="line">&lt;input ref=&#123; input =&gt; <span class="keyword">this</span>.txtInput = input &#125; type=<span class="string">"button"</span> value=<span class="string">"我是豆豆"</span> /&gt;</span><br><span class="line"></span><br><span class="line">componentDidMount() &#123;</span><br><span class="line">  <span class="comment">// 通过 this.txtInput 属性获取元素绑定事件</span></span><br><span class="line">  <span class="keyword">this</span>.txtInput.addEventListener(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      count:<span class="keyword">this</span>.state.count + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="事件绑定中的this"><a href="#事件绑定中的this" class="headerlink" title="事件绑定中的this"></a>事件绑定中的this</h2><ul>
<li>1 通过 <code>bind</code> 绑定</li>
<li>2 通过 <code>箭头函数</code> 绑定</li>
</ul>
<h3 id="通过bind绑定"><a href="#通过bind绑定" class="headerlink" title="通过bind绑定"></a>通过bind绑定</h3><ul>
<li>原理：<code>bind</code>能够调用函数，改变函数内部this的指向，并返回一个新函数</li>
<li>说明：<code>bind</code>第一个参数为返回函数中this的指向，后面的参数为传给返回函数的参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自定义方法：</span></span><br><span class="line">handleBtnClick(arg1, arg2) &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    msg: <span class="string">'点击事件修改state的值'</span> + arg1 + arg2</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button onClick=&#123;</span><br><span class="line">        <span class="comment">// 无参数</span></span><br><span class="line">        <span class="comment">// this.handleBtnClick.bind(this)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 有参数</span></span><br><span class="line">        <span class="keyword">this</span>.handleBtnClick.bind(<span class="keyword">this</span>, <span class="string">'abc'</span>, [<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">      &#125;&gt;事件中<span class="keyword">this</span>的处理&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;h1&gt;&#123;this.state.msg&#125;&lt;/</span>h1&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在构造函数中使用<code>bind</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>() &#123;</span><br><span class="line">  <span class="keyword">super</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.handleBtnClick = <span class="keyword">this</span>.handleBtnClick.bind(<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// render() 方法中：</span></span><br><span class="line">&lt;button onClick=&#123; <span class="keyword">this</span>.handleBtnClick &#125;&gt;事件中<span class="keyword">this</span>的处理&lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="通过箭头函数绑定"><a href="#通过箭头函数绑定" class="headerlink" title="通过箭头函数绑定"></a>通过箭头函数绑定</h3><ul>
<li>原理：<code>箭头函数</code>中的this由所处的环境决定，自身不绑定this</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"button"</span> value=<span class="string">"在构造函数中绑定this并传参"</span> onClick=&#123;</span><br><span class="line">  () =&gt; &#123; <span class="keyword">this</span>.handleBtnClick(<span class="string">'参数1'</span>, <span class="string">'参数2'</span>) &#125;</span><br><span class="line">&#125; /&gt;</span><br><span class="line"></span><br><span class="line">handleBtnClick(arg1, arg2) &#123;</span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    msg: <span class="string">'在构造函数中绑定this并传参'</span> + arg1 + arg2</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="受控组件"><a href="#受控组件" class="headerlink" title="受控组件"></a>受控组件</h2><ul>
<li><a href="https://www.reactjscn.com/docs/forms.html" target="_blank" rel="noopener">表单和受控组件</a></li>
<li><a href="https://www.reactjscn.com/docs/uncontrolled-components.html" target="_blank" rel="noopener">非受控组件</a></li>
<li><a href="http://blog.csdn.net/fengxiaoxiao_1/article/details/78128386" target="_blank" rel="noopener">浅析React中的受控组件和非受控组件</a></li>
</ul>
<blockquote>
<p>在React中，可变的状态通常保存在组件的<code>state</code>中，并且只能用 <code>setState()</code> 方法进行更新.<br>我们通过使react变成一种单一数据源的状态来结合二者。<br>React负责渲染表单的组件仍然控制用户后续输入时所发生的变化。相应的，其值由React控制的输入表单元素称为“受控组件”。</p>
</blockquote>
<ul>
<li>在React应用中，任何可变数据应该只有一个：“单一数据源”</li>
<li>注意：<strong>只能通过setState来设置受控组件的值</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟实现文本框数据的双向绑定</span></span><br><span class="line">&lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.msg&#125; onChange=&#123;<span class="keyword">this</span>.handleTextChange&#125;/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当文本框内容改变的时候，触发这个事件，重新给state赋值</span></span><br><span class="line">handleTextChange = <span class="function"><span class="params">event</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(event.target.value)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">    msg: event.target.value</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="props校验"><a href="#props校验" class="headerlink" title="props校验"></a>props校验</h2><ul>
<li>作用：通过类型检查，提高程序的稳定性</li>
<li>命令：<code>npm i -S prop-types</code></li>
<li><a href="https://www.reactjscn.com/docs/typechecking-with-proptypes.html" target="_blank" rel="noopener">类型校验文档</a></li>
<li>使用：给类提供一个静态属性 <code>propTypes</code>（对象），来约束<code>props</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入模块</span></span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ...以下代码是类的静态属性：</span></span><br><span class="line"><span class="comment">// propTypes 静态属性的名称是固定的！！！</span></span><br><span class="line"><span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">  initCount: PropTypes.number, <span class="comment">// 规定属性的类型</span></span><br><span class="line">  initAge: PropTypes.number.isRequired <span class="comment">// 规定属性的类型，且规定为必传字段</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="React-单向数据流-和-状态提升"><a href="#React-单向数据流-和-状态提升" class="headerlink" title="React 单向数据流 和 状态提升"></a>React 单向数据流 和 状态提升</h2><ul>
<li><a href="https://www.reactjscn.com/docs/state-and-lifecycle.html#the-data-flows-down" target="_blank" rel="noopener">单向数据流</a></li>
<li><p><a href="https://www.reactjscn.com/docs/lifting-state-up.html" target="_blank" rel="noopener">状态提升</a></p>
</li>
<li><p>作用：规定组件通讯的使用模式</p>
</li>
<li><p>单向数据流：任何状态始终由某些特定组件（一般是顶层父组件）所有，并且该状态只能影响树中下方的组件</p>
</li>
<li>状态提升：在React中，状态分享是通过将state提升至离需要这些数据的组件最近的父组件来完成的，这就是所谓的状态提升</li>
<li>模式：父组件提供数据（状态），子组件从父组件中获取数据，并进行展示处理</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">状态是属于组件的私有数据，除了拥有它的组件外，其他组件不能访问，</span><br><span class="line">组件可以将私有的状态作为属性传递给子组件，</span><br><span class="line">这通常被称为单向数据流（方向：父组件 --&gt; 子组件）</span><br></pre></td></tr></table></figure>
<h3 id="组件通讯"><a href="#组件通讯" class="headerlink" title="组件通讯"></a>组件通讯</h3><ul>
<li>父 -&gt; 子：<code>props</code></li>
<li>子 -&gt; 父：父组件通过props传递回调函数给子组件，子组件调用函数将数据作为参数传递给父组件</li>
<li><p>兄弟组件：因为React是单向数据流，因此需要借助父组件进行传递，通过父组件回调函数改变兄弟组件的props</p>
</li>
<li><p>React中的状态管理：  flux（提出状态管理的思想）/ Redux 推荐 / Mobx / …</p>
</li>
<li>Vue中的状态管理：    Vuex</li>
<li>简单来说，就是统一管理了项目中所有的数据，让数据变的可控</li>
</ul>
<p>vue技术栈：vue + vue-router + vuex + axios<br>react技术栈：react + react路由 + redux + axios/fetch</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000006831820" target="_blank" rel="noopener">组件通讯</a></li>
</ul>
<h3 id="Context特性"><a href="#Context特性" class="headerlink" title="Context特性"></a>Context特性</h3><ul>
<li>注意：<strong>如果不熟悉React中的数据流，不推荐使用这个属性</strong><ul>
<li>这是一个实验性的API，在未来的React版本中可能会被更改</li>
</ul>
</li>
<li>作用：跨级传递数据（爷爷给孙子传递数据），避免向下每层手动地传递<code>props</code></li>
<li>说明：需要配合<code>PropTypes</code>类型限制来使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grandfather</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 类型限制（必须），静态属性名称固定</span></span><br><span class="line">  <span class="keyword">static</span> childContextTypes = &#123;</span><br><span class="line">    color: PropTypes.string.isRequired</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 传递给孙子组件的数据</span></span><br><span class="line">  getChildContext() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      color: <span class="string">'red'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Father&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Father</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 类型限制，静态属性名字固定</span></span><br><span class="line">  <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">    color: PropTypes.string</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="comment">// 从上下文对象中获取爷爷组件传递过来的数据</span></span><br><span class="line">      &lt;h1 style=&#123;&#123; <span class="attr">color</span>: <span class="keyword">this</span>.context.color &#125;&#125;&gt;爷爷告诉文字是红色的&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class Father extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">  render() &#123;</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">      &lt;Child&gt;&lt;/</span>Child&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/web前端/" rel="tag"># web前端</a>
          
            <a href="/tags/React/" rel="tag"># React</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/08/vue常见的面试题/" rel="next" title="vue常见的面试题">
                <i class="fa fa-chevron-left"></i> vue常见的面试题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/08/Redux/" rel="prev" title="Redux">
                Redux <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/touxiang.png" alt="一昂杨丶">
            
              <p class="site-author-name" itemprop="name">一昂杨丶</p>
              <p class="site-description motion-element" itemprop="description">山中何事？松花酿酒，春水煎茶。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#React-背景介绍"><span class="nav-number">1.</span> <span class="nav-text">React 背景介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是React"><span class="nav-number">2.</span> <span class="nav-text">什么是React</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特点"><span class="nav-number">2.1.</span> <span class="nav-text">特点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么要用React"><span class="nav-number">3.</span> <span class="nav-text">为什么要用React</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React中的核心概念"><span class="nav-number">4.</span> <span class="nav-text">React中的核心概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#虚拟DOM（Vitural-DOM）"><span class="nav-number">5.</span> <span class="nav-text">虚拟DOM（Vitural DOM）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VituralDOM的处理方式"><span class="nav-number">5.1.</span> <span class="nav-text">VituralDOM的处理方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Diff算法"><span class="nav-number">6.</span> <span class="nav-text">Diff算法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Diff算法的说明-1"><span class="nav-number">6.1.</span> <span class="nav-text">Diff算法的说明 - 1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Diff算法的说明-2"><span class="nav-number">6.2.</span> <span class="nav-text">Diff算法的说明 - 2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Diff算法的说明-3"><span class="nav-number">6.3.</span> <span class="nav-text">Diff算法的说明 - 3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key-属性"><span class="nav-number">6.4.</span> <span class="nav-text">key 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key-demo"><span class="nav-number">6.5.</span> <span class="nav-text">key demo</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React的基本使用"><span class="nav-number">7.</span> <span class="nav-text">React的基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#API说明"><span class="nav-number">7.1.</span> <span class="nav-text">API说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#createElement-的问题"><span class="nav-number">7.2.</span> <span class="nav-text">createElement()的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX-的基本使用"><span class="nav-number">7.3.</span> <span class="nav-text">JSX 的基本使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSX的注意点"><span class="nav-number">8.</span> <span class="nav-text">JSX的注意点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React组件"><span class="nav-number">9.</span> <span class="nav-text">React组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React创建组件的两种方式"><span class="nav-number">9.1.</span> <span class="nav-text">React创建组件的两种方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#JavaScript函数创建"><span class="nav-number">9.1.1.</span> <span class="nav-text">JavaScript函数创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#class创建"><span class="nav-number">9.1.2.</span> <span class="nav-text">class创建</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#给组件传递数据-父子组件传递数据"><span class="nav-number">10.</span> <span class="nav-text">给组件传递数据 - 父子组件传递数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#封装组件到独立的文件中"><span class="nav-number">11.</span> <span class="nav-text">封装组件到独立的文件中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#props和state"><span class="nav-number">12.</span> <span class="nav-text">props和state</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#props"><span class="nav-number">12.1.</span> <span class="nav-text">props</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#state"><span class="nav-number">12.2.</span> <span class="nav-text">state</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSX语法转化过程"><span class="nav-number">13.</span> <span class="nav-text">JSX语法转化过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#评论列表案例"><span class="nav-number">14.</span> <span class="nav-text">评论列表案例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#style样式"><span class="nav-number">15.</span> <span class="nav-text">style样式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#相关文章"><span class="nav-number">16.</span> <span class="nav-text">相关文章</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ES6中class关键字的使用"><span class="nav-number">17.</span> <span class="nav-text">ES6中class关键字的使用</span></a></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#react-生命周期"><span class="nav-number"></span> <span class="nav-text">react 生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#组件的生命周期"><span class="nav-number">1.</span> <span class="nav-text">组件的生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#组件生命周期函数总览"><span class="nav-number">1.1.</span> <span class="nav-text">组件生命周期函数总览</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件生命周期-创建阶段-Mounting"><span class="nav-number">1.2.</span> <span class="nav-text">组件生命周期 - 创建阶段(Mounting)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#constructor-NaN"><span class="nav-number">1.2.1.</span> <span class="nav-text">constructor()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#componentWillMount"><span class="nav-number">1.2.2.</span> <span class="nav-text">componentWillMount()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#render"><span class="nav-number">1.2.3.</span> <span class="nav-text">render()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#componentDidMount"><span class="nav-number">1.2.4.</span> <span class="nav-text">componentDidMount()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件生命周期-运行阶段（Updating）"><span class="nav-number">1.3.</span> <span class="nav-text">组件生命周期 - 运行阶段（Updating）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#componentWillReceiveProps"><span class="nav-number">1.3.1.</span> <span class="nav-text">componentWillReceiveProps()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#shouldComponentUpdate"><span class="nav-number">1.3.2.</span> <span class="nav-text">shouldComponentUpdate()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#componentWillUpdate"><span class="nav-number">1.3.3.</span> <span class="nav-text">componentWillUpdate()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#render-渲染"><span class="nav-number">1.3.4.</span> <span class="nav-text">render() 渲染</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#componentDidUpdate"><span class="nav-number">1.3.5.</span> <span class="nav-text">componentDidUpdate()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件生命周期-卸载阶段（Unmounting）"><span class="nav-number">1.4.</span> <span class="nav-text">组件生命周期 - 卸载阶段（Unmounting）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#componentWillUnmount"><span class="nav-number">1.4.1.</span> <span class="nav-text">componentWillUnmount()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-createReactClass（知道）"><span class="nav-number">2.</span> <span class="nav-text">React - createReactClass（知道）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#state和setState"><span class="nav-number">3.</span> <span class="nav-text">state和setState</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件绑定事件"><span class="nav-number">4.</span> <span class="nav-text">组件绑定事件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#React中的事件机制-推荐"><span class="nav-number">4.1.</span> <span class="nav-text">React中的事件机制 - 推荐</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JS原生方式-知道即可"><span class="nav-number">4.2.</span> <span class="nav-text">JS原生方式 - 知道即可</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件绑定中的this"><span class="nav-number">5.</span> <span class="nav-text">事件绑定中的this</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#通过bind绑定"><span class="nav-number">5.1.</span> <span class="nav-text">通过bind绑定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#通过箭头函数绑定"><span class="nav-number">5.2.</span> <span class="nav-text">通过箭头函数绑定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#受控组件"><span class="nav-number">6.</span> <span class="nav-text">受控组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#props校验"><span class="nav-number">7.</span> <span class="nav-text">props校验</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React-单向数据流-和-状态提升"><span class="nav-number">8.</span> <span class="nav-text">React 单向数据流 和 状态提升</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#组件通讯"><span class="nav-number">8.1.</span> <span class="nav-text">组件通讯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Context特性"><span class="nav-number">8.2.</span> <span class="nav-text">Context特性</span></a></li></ol></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">一昂杨丶</span>

  
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'KANTsahXvPqO2PJEnY9sTxeo-9Nh9j0Va',
        appKey: 'I8UOBt7crsmds5pLkGEmpeCj',
        placeholder: '各位道友,请举手发言',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("KANTsahXvPqO2PJEnY9sTxeo-9Nh9j0Va", "I8UOBt7crsmds5pLkGEmpeCj");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
