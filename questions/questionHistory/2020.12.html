<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面试题 | 不露声色丶</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="个人网站">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.91d63959.css" as="style"><link rel="preload" href="/assets/js/app.531756a1.js" as="script"><link rel="preload" href="/assets/js/3.956b1460.js" as="script"><link rel="preload" href="/assets/js/1.7962d709.js" as="script"><link rel="preload" href="/assets/js/55.c291de9c.js" as="script"><link rel="prefetch" href="/assets/js/10.be4551d3.js"><link rel="prefetch" href="/assets/js/11.e4f06f9c.js"><link rel="prefetch" href="/assets/js/12.ecdffdd5.js"><link rel="prefetch" href="/assets/js/13.cfdded77.js"><link rel="prefetch" href="/assets/js/14.4d5d98e5.js"><link rel="prefetch" href="/assets/js/15.421e18b7.js"><link rel="prefetch" href="/assets/js/16.bccb4b70.js"><link rel="prefetch" href="/assets/js/17.a00cb495.js"><link rel="prefetch" href="/assets/js/18.e9d91d3e.js"><link rel="prefetch" href="/assets/js/19.5f4bee19.js"><link rel="prefetch" href="/assets/js/20.35df22f5.js"><link rel="prefetch" href="/assets/js/21.3b4f25d4.js"><link rel="prefetch" href="/assets/js/22.192f010a.js"><link rel="prefetch" href="/assets/js/23.f349ebf2.js"><link rel="prefetch" href="/assets/js/24.e4cc26eb.js"><link rel="prefetch" href="/assets/js/25.efbc3182.js"><link rel="prefetch" href="/assets/js/26.ca99e9f4.js"><link rel="prefetch" href="/assets/js/27.84bf62a4.js"><link rel="prefetch" href="/assets/js/28.e665acdf.js"><link rel="prefetch" href="/assets/js/29.5493b7c4.js"><link rel="prefetch" href="/assets/js/30.ec4ea53c.js"><link rel="prefetch" href="/assets/js/31.742fd584.js"><link rel="prefetch" href="/assets/js/32.701b252e.js"><link rel="prefetch" href="/assets/js/33.299fdb07.js"><link rel="prefetch" href="/assets/js/34.3d4da14e.js"><link rel="prefetch" href="/assets/js/35.cc818111.js"><link rel="prefetch" href="/assets/js/36.05b9380a.js"><link rel="prefetch" href="/assets/js/37.19267f14.js"><link rel="prefetch" href="/assets/js/38.94cf43a3.js"><link rel="prefetch" href="/assets/js/39.8deecc16.js"><link rel="prefetch" href="/assets/js/4.eaa8f14e.js"><link rel="prefetch" href="/assets/js/40.23727b4f.js"><link rel="prefetch" href="/assets/js/41.0d4ef515.js"><link rel="prefetch" href="/assets/js/42.1a07d05a.js"><link rel="prefetch" href="/assets/js/43.4417d72d.js"><link rel="prefetch" href="/assets/js/44.f5be4a35.js"><link rel="prefetch" href="/assets/js/45.658253ad.js"><link rel="prefetch" href="/assets/js/46.a39b7761.js"><link rel="prefetch" href="/assets/js/47.643842c9.js"><link rel="prefetch" href="/assets/js/48.b1f7f50c.js"><link rel="prefetch" href="/assets/js/49.3254c32b.js"><link rel="prefetch" href="/assets/js/5.b03e474b.js"><link rel="prefetch" href="/assets/js/50.4416660d.js"><link rel="prefetch" href="/assets/js/51.8de6c426.js"><link rel="prefetch" href="/assets/js/52.5b01e564.js"><link rel="prefetch" href="/assets/js/53.86ae1223.js"><link rel="prefetch" href="/assets/js/54.affb5f4d.js"><link rel="prefetch" href="/assets/js/56.390e3fcc.js"><link rel="prefetch" href="/assets/js/57.8b7d0277.js"><link rel="prefetch" href="/assets/js/58.0095e5ab.js"><link rel="prefetch" href="/assets/js/59.e380537f.js"><link rel="prefetch" href="/assets/js/6.7d2f1e63.js"><link rel="prefetch" href="/assets/js/60.119b29ee.js"><link rel="prefetch" href="/assets/js/61.9b9c0b8e.js"><link rel="prefetch" href="/assets/js/62.b388886c.js"><link rel="prefetch" href="/assets/js/63.aa7ab11e.js"><link rel="prefetch" href="/assets/js/64.18c7d998.js"><link rel="prefetch" href="/assets/js/65.6c56fc75.js"><link rel="prefetch" href="/assets/js/66.b875104b.js"><link rel="prefetch" href="/assets/js/67.b9d81181.js"><link rel="prefetch" href="/assets/js/68.155f6a46.js"><link rel="prefetch" href="/assets/js/69.b2ce26c7.js"><link rel="prefetch" href="/assets/js/7.a47be364.js"><link rel="prefetch" href="/assets/js/70.e68f2bb4.js"><link rel="prefetch" href="/assets/js/71.12c38139.js"><link rel="prefetch" href="/assets/js/72.218b1ec4.js"><link rel="prefetch" href="/assets/js/73.9ae09c84.js"><link rel="prefetch" href="/assets/js/74.74308458.js"><link rel="prefetch" href="/assets/js/75.5ee9e7aa.js"><link rel="prefetch" href="/assets/js/76.94d6f4a4.js"><link rel="prefetch" href="/assets/js/77.894f78ea.js"><link rel="prefetch" href="/assets/js/78.1aeb9bbb.js"><link rel="prefetch" href="/assets/js/8.ceb1382c.js"><link rel="prefetch" href="/assets/js/9.405c6fe6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.91d63959.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>不露声色丶</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>个人网站</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2023
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">不露声色丶</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link"><i class="undefined"></i>
  笔记
</a></div><div class="nav-item"><a href="/questions/" class="nav-link router-link-active"><i class="undefined"></i>
  面试题
</a></div><div class="nav-item"><a href="/service/" class="nav-link"><i class="undefined"></i>
  服务器
</a></div><div class="nav-item"><a href="/mac/" class="nav-link"><i class="undefined"></i>
  常用mac
</a></div><div class="nav-item"><a href="/tsNotes/" class="nav-link"><i class="undefined"></i>
  typescrpt学习
</a></div><div class="nav-item"><a href="https://github.com/GuoweiYangGitHub" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><img src="https://images-1300779496.cos.ap-shanghai.myqcloud.com/WechatIMG4.jpeg" alt="author-avatar" class="personal-img" data-v-39576ba9> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>67</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link"><i class="undefined"></i>
  笔记
</a></div><div class="nav-item"><a href="/questions/" class="nav-link router-link-active"><i class="undefined"></i>
  面试题
</a></div><div class="nav-item"><a href="/service/" class="nav-link"><i class="undefined"></i>
  服务器
</a></div><div class="nav-item"><a href="/mac/" class="nav-link"><i class="undefined"></i>
  常用mac
</a></div><div class="nav-item"><a href="/tsNotes/" class="nav-link"><i class="undefined"></i>
  typescrpt学习
</a></div><div class="nav-item"><a href="https://github.com/GuoweiYangGitHub" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/questions/fontEndBasic/html" class="sidebar-heading clickable"><span>前端基础</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/fontEndBasic/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/questions/fontEndBasic/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/questions/fontEndBasic/JS.html" class="sidebar-link">JS</a></li><li><a href="/questions/fontEndBasic/Vue.html" class="sidebar-link">Vue</a></li><li><a href="/questions/fontEndBasic/React.html" class="sidebar-link">React</a></li><li><a href="/questions/fontEndBasic/WXApp.html" class="sidebar-link">小程序</a></li><li><a href="/questions/fontEndBasic/Webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/questions/fontEndBasic/PerformanceOptimization.html" class="sidebar-link">性能优化</a></li><li><a href="/questions/fontEndBasic/CrossTerminal.html" class="sidebar-link">跨终端</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/questions/computer/ComputerNetWork" class="sidebar-heading clickable"><span>计算机基础</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/computer/ComputerNetWork.html" class="sidebar-link">浏览器基础与http协议</a></li><li><a href="/questions/computer/SecurityNote.html" class="sidebar-link">网络安全</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/questions/dataStructure/Concept" class="sidebar-heading clickable"><span>数据类型与算法</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/dataStructure/Concept.html" class="sidebar-link">数据结构</a></li><li><a href="/questions/dataStructure/Sort.html" class="sidebar-link">常见排序算法</a></li><li><a href="/questions/dataStructure/Algorithm.html" class="sidebar-link">算法题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/questions/typescript/TypeScript" class="sidebar-heading clickable"><span>Typescript</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/typescript/TypeScript.html" class="sidebar-link">Typescript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/questions/autoTesting/AutoTesting" class="sidebar-heading clickable"><span>自动化测试</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/autoTesting/AutoTesting.html" class="sidebar-link">自动化测试</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/questions/written/Written" class="sidebar-heading clickable"><span>手写题</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/written/Written.html" class="sidebar-link">常见笔试题</a></li><li><a href="/questions/written/Axios.html" class="sidebar-link">Axios</a></li><li><a href="/questions/written/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/questions/written/DeepClone.html" class="sidebar-link">深拷贝</a></li><li><a href="/questions/written/ArrayObject.html" class="sidebar-link">数组对象去重</a></li><li><a href="/questions/written/GetOutputResults.html" class="sidebar-link">判断程序输出的结果</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/questions/questionHistory/2022.10" class="sidebar-heading clickable open"><span>面试记录</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/questions/questionHistory/2022.10.html" class="sidebar-link">2022.10</a></li><li><a href="/questions/questionHistory/2021.04.html" class="sidebar-link">2021.04</a></li><li><a href="/questions/questionHistory/2021.01.html" class="sidebar-link">2021.01</a></li><li><a href="/questions/questionHistory/2020.12.html" aria-current="page" class="active sidebar-link">2020.12</a></li><li><a href="/questions/questionHistory/2020.11.html" class="sidebar-link">2020.11</a></li><li><a href="/questions/questionHistory/2019.06.html" class="sidebar-link">2019.06</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2023
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">面试题</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h1> <h2 id="css"><a href="#css" class="header-anchor">#</a> CSS</h2> <h3 id="布局方式"><a href="#布局方式" class="header-anchor">#</a> 布局方式</h3> <ul><li>让不定宽高的元素水平居中</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* 1. */</span>
<span class="token selector">.father</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.child</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">transfrom</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 2 table居中*/</span>
<span class="token selector">.father</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.child</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 3.flex居中 */</span>
<span class="token selector">.father</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 4.如果是块元素 */</span>
<span class="token selector">.child</span> <span class="token punctuation">{</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">margin-right</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 5.如果行内块,图片,文字,块元素 */</span>
<span class="token selector">.father</span> <span class="token punctuation">{</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li>两边固定中间自适应</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 方法1.使用定位 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.left</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.right</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token selector">.center</span> <span class="token punctuation">{</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 方法2. 使用浮动 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.left</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.right</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.center</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 注意, 盒子的位置需要发生变化 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box clearfix<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="盒子模型"><a href="#盒子模型" class="header-anchor">#</a> 盒子模型</h3> <ul><li>一种是 IE 盒子模型 border-box 宽或高 = content + border + padding</li> <li>一种是标准盒子模型 content-box 宽或高 = content
设置这两种盒子模型: <code>box-sizing: border-box/content-box;</code></li></ul> <h3 id="bfc-块级格式化上下文"><a href="#bfc-块级格式化上下文" class="header-anchor">#</a> BFC 块级格式化上下文</h3> <h4 id="bfc-布局规则"><a href="#bfc-布局规则" class="header-anchor">#</a> BFC 布局规则</h4> <ul><li>内部的 BOX 会在垂直方向,一个接一个的放置</li> <li>BFC 是页面上的一个隔离的独立容器</li> <li>box 垂直方向的距离是由 margin 决定的,属于同一 BFC 的两个相邻元素 margin 会重叠</li> <li>每个元素的左边,与包含的盒子的左边相接触,即使存在浮动也如此.</li> <li>BFC 的区域不会与 float 重叠</li> <li>BFC 就是页面上一个隔离的容器,容器里面的子元素不会影响到外面的元素.反之也是如此</li> <li>计算 BFC 的高度时,浮动元素也参与计算.</li></ul> <h4 id="哪些元素会生成-bfc"><a href="#哪些元素会生成-bfc" class="header-anchor">#</a> 哪些元素会生成 BFC</h4> <ul><li>float 不为 none</li> <li>position 不为 static/relative</li> <li>overflow 不为 visible</li> <li>display 的值为 table table-cell table-caption</li> <li>根元素</li></ul> <h4 id="怎么防止-margin-重叠"><a href="#怎么防止-margin-重叠" class="header-anchor">#</a> 怎么防止 margin 重叠</h4> <ul><li>overflow:hidden;</li></ul> <h4 id="有哪些-bfc-应用"><a href="#有哪些-bfc-应用" class="header-anchor">#</a> 有哪些 BFC 应用</h4> <ul><li>左侧/右侧固定,右侧/左侧 自适应</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.left</span> <span class="token punctuation">{</span>
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.right</span> <span class="token punctuation">{</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="弹性布局"><a href="#弹性布局" class="header-anchor">#</a> 弹性布局</h3> <ul><li><p>initial 设置它的属性为它的默认值</p></li> <li><p>inherit 让父元素继承该属性</p></li> <li><p>主轴对齐方式 justify-content: flex-start | flex-end | center| baseline</p></li> <li><p>侧轴对齐方式 align-items: flex-start | flex-end | center | space-between | space-around</p></li> <li><p>改变主轴方向 flex-decoration: row | row-reverse | column | column-reverse | initial | inherit</p> <ul><li>row(默认值)水平显示 | 与 row 相同,顺序相反 | 垂直显示 | 垂直显示, 顺序相反 | | 从父元素继承该属性值</li></ul></li> <li><p>给 flex 布局盒子固定宽度: flex-basis: number | auto | initial | inherit</p></li></ul> <h2 id="js"><a href="#js" class="header-anchor">#</a> JS</h2> <h3 id="怎么理解闭包-只有-js-特有的属性"><a href="#怎么理解闭包-只有-js-特有的属性" class="header-anchor">#</a> 怎么理解闭包(只有 js 特有的属性)</h3> <ul><li>什么是闭包?
<ul><li>闭包是指有权访问另一函数作用域中的变量的函数</li></ul></li> <li>闭包产生的条件
<ul><li>函数在定义时的词法作用域以外的地方被调用就会产生闭包(词法作用域: 定义在词法阶段的作用域)</li> <li>当内部函数 <code>访问了外部函数的局部变量</code>才会产生闭包.
<ul><li>可以通过控制台 <code>sources</code> -&gt; <code>Call Stack</code> -&gt; <code>Closure</code>(如果产生了闭包才会有 Closure)</li></ul></li></ul></li> <li>创建闭包的常见方式,就是在一个函数内部创建另一个函数</li> <li>闭包的用处
<ul><li>私有化变量</li> <li>可以读取函数内部的变量</li> <li>让这些变量始终保持在内存中</li></ul></li> <li>闭包的问题:
<ul><li>会占用一块内存,</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">999</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> f2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999nAdd();result(); // 1000</span>

<span class="token comment">// 如果想要释放这块内存</span>
result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">// 类似闭包，实际并不是闭包  ,因为它并没有在当前词法作用域以外调用</span>
<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">999</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 如果想要释放这块内存</span>
result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="递归"><a href="#递归" class="header-anchor">#</a> 递归</h3> <h4 id="斐波拉契数列"><a href="#斐波拉契数列" class="header-anchor">#</a> 斐波拉契数列</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1,1,2,3,5,8,13,21,34,55,89,144   //数组的第n个是第 n-1 个和 n-2 个的和</span>
<span class="token keyword">function</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fn</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
      <span class="token keyword">return</span> temp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="垃圾回收机制"><a href="#垃圾回收机制" class="header-anchor">#</a> 垃圾回收机制</h3> <ul><li><p>内存: 计算机中所有程序的运行都是在内存中进行的, 因此内存的性能对计算机的影响非常打,运行程序需要消耗内存,当程序结束时,内存会得到释放.</p></li> <li><p>javascript 分配内存: 当我们定义变量,javascript 需要分配内存储存数据, 无论是值类型或引用类型,都需要储存在内存中.</p></li> <li><p>垃圾回收: 当代码执行结束,分配的内存已经不需要了,这个时候需要将内存进行回收,在 js 中,<code>垃圾回收机器</code>会帮我回收<code>不再需要使用</code>的内存</p></li> <li><p><code>标记清除法清除</code>(现代浏览器都使用的是标记清除法)</p> <ul><li>此算法假定设置一个叫做根(root)的对象, 在(js 中,根是全局对象 window),定期的让垃圾回收器从根开始,找到所有从根开始引用的对象, 然后找到这些对象的引用对象, 从根开始,垃圾回收器将找到所有可以获得的对象和所有不能获得的对象</li></ul></li> <li><p><code>引用计数法清除</code></p> <ul><li>如果没有引用指向某个对象(或者函数作用域),那么这个对象或函数作用域就会被垃圾回收机制回收</li> <li>下面这个例子使用引用计数法不会被回收</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> obj<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> o<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="介绍-dom-的三个阶段"><a href="#介绍-dom-的三个阶段" class="header-anchor">#</a> 介绍 DOM 的三个阶段</h3> <ul><li>事件捕获</li> <li>目标阶段</li> <li>事件冒泡</li></ul> <h3 id="封装事件监听和解绑的兼容写法"><a href="#封装事件监听和解绑的兼容写法" class="header-anchor">#</a> 封装事件监听和解绑的兼容写法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> myEvent <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">addEvent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> event<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> func<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">[</span><span class="token string">'on'</span> <span class="token operator">+</span> event<span class="token punctuation">]</span> <span class="token operator">=</span> func<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">removeEvent</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ele<span class="token punctuation">,</span> event<span class="token punctuation">,</span> func</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> func<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> event<span class="token punctuation">,</span> func<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      ele<span class="token punctuation">[</span><span class="token string">'on'</span> <span class="token operator">+</span> event<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="事件捕获的具体流程"><a href="#事件捕获的具体流程" class="header-anchor">#</a> 事件捕获的具体流程</h4> <ul><li>window =&gt; document =&gt; html =&gt; body =&gt; ... =&gt; 目标元素</li></ul> <h4 id="event-对象有哪些常用应用"><a href="#event-对象有哪些常用应用" class="header-anchor">#</a> event 对象有哪些常用应用</h4> <ul><li>1.阻止默认事件 e.preventDefault()</li> <li>2.阻止冒泡 e.stopPropagation()</li> <li>3.阻止相同事件的其他侦听器 e.stopImmediatePropagation()</li> <li>4.当前绑定事件的元素 e.currentTarget</li> <li>5.当前被点击的元素 e.target</li></ul> <h4 id="自定义事件"><a href="#自定义事件" class="header-anchor">#</a> 自定义事件</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ele<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ele<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// dispatchEvent() 方法给节点派一个合成事件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="原型与原型链"><a href="#原型与原型链" class="header-anchor">#</a> 原型与原型链</h3> <h4 id="理解"><a href="#理解" class="header-anchor">#</a> 理解</h4> <ul><li>所有的函数(包括构造函数) 都是 Function new 出来的,原型都是 Function.prototype</li> <li>所有的原型对象都是 Object(构造函数) new 出来的,原型都是 Object.prototype</li></ul> <h4 id="instanceof-的原理"><a href="#instanceof-的原理" class="header-anchor">#</a> instanceof 的原理</h4> <ul><li><p>A instance B 是指 B.prototype 是否在 A 的原型链上(简单理解就是沿着 A 的<strong>proto</strong> 跟 B 的 prototype 寻找,如果能找到同一引用返回 true,否则返回 false)</p></li> <li><p>示例</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fn<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
fn<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

Object<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token comment">// -------------------------------------</span>
<span class="token comment">// Function是自身创建的</span>
Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token comment">// -------------------------------------</span>
<span class="token comment">// Function.prototype 是对象 所以</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="原型链的继承"><a href="#原型链的继承" class="header-anchor">#</a> 原型链的继承</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1.普通继承</span>
<span class="token comment">// 原理: 改变父类构造函数运行时的this指向</span>
<span class="token comment">// 缺点: 只实现部分继承 ,父类原型对象上的属性/方法类取不到</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Ming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.借助原型链继承</span>
<span class="token comment">// 原理: new Person() =&gt; Person.__proto__ === Ming.prototype =&gt; new Person() =&gt; new Person().__proto__ =&gt; new Person.prototype</span>
<span class="token comment">// 缺点: 多个实例公用一个父类的实例对象,修改其中一个实例上的引用对象,会对其他造成影响</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Ming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Ming</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3.组合继承</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Ming</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Ming</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>

<span class="token comment">// 4.组合继承的完美解决方案</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Ming</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Ming</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Ming</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Ming<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h4 id="new-运算符实现机制"><a href="#new-运算符实现机制" class="header-anchor">#</a> new 运算符实现机制</h4> <ul><li>创建了一个新对象</li> <li>将构造函数的作用域赋给新对象(让 this 指向了这个对象)</li> <li>执行了构造函数(为这个新对象添加属性)</li> <li>返回新对象</li></ul> <h4 id="this-指向-函数的-4-种调用模式"><a href="#this-指向-函数的-4-种调用模式" class="header-anchor">#</a> this 指向 (函数的 4 种调用模式)</h4> <ul><li>普通函数调用 this 执行 window</li> <li>对象调用 this 指向 调用的这个对象</li> <li>new 构造函数 调用, this 指向 new 构造函数的实例</li> <li>setTimeout setInterval this 指向 window</li> <li>箭头函数 ,this 指向上下文(context 也就是作用域)</li> <li>call,apply 调用 this 指向你要替换的对象</li></ul> <h4 id="改变-this-指向"><a href="#改变-this-指向" class="header-anchor">#</a> 改变 this 指向</h4> <ul><li>call 使用 call(this, arg1,arg2,...) //会主动调用函数</li> <li>apply 使用 apply(this, [...]) //会主动调用函数</li> <li>bind 使用 bind(this) //不会主动调用函数</li></ul> <h3 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h3> <h4 id="提升页面性能的方法"><a href="#提升页面性能的方法" class="header-anchor">#</a> 提升页面性能的方法</h4> <ul><li>资源压缩合并,减少 http 请求</li> <li>非核心代码异步加载</li> <li>使用浏览器缓存</li> <li>使用 CDN 缓存</li> <li>预解析 DNS</li> <li>HTTP 优化,如使用语义化标签,避免重定向</li> <li>CSS 优化,如布局代码写在前面,根据需求加载网络字体,避免使用 css 表达式</li></ul> <h4 id="异步加载的方式"><a href="#异步加载的方式" class="header-anchor">#</a> 异步加载的方式</h4> <ul><li>async</li> <li>defer</li> <li>动态脚本加载
<ul><li>var script = document.createElement('script')</li> <li>script.type = 'text/javascript'</li> <li>script.src = './js/aaa.js'</li> <li>document.querySelector('head').appendChild(script)</li></ul></li></ul> <h4 id="defer-与-async-的区别"><a href="#defer-与-async-的区别" class="header-anchor">#</a> defer 与 async 的区别</h4> <ul><li>defer 是在 html 解析后才会执行,如果有多个, 按加载顺序依次执行</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// demo.js</span>
<span class="token comment">// console.log('demo-js');</span>
<span class="token comment">// -----------------</span>
<span class="token comment">// demo1.js</span>
<span class="token comment">// console.log('demo1-js');</span>
<span class="token comment">// -----------------</span>
<span class="token comment">// html结构</span>
<span class="token comment">// &lt;script src=&quot;./demo.js&quot; defer&gt;&lt;/script&gt;</span>
<span class="token comment">// &lt;script src=&quot;./demo1.js&quot; defer&gt;&lt;/script&gt;</span>

<span class="token comment">// &lt;script&gt;</span>
<span class="token comment">//   console.log('html-js');</span>
<span class="token comment">// &lt;/script&gt;</span>

<span class="token comment">// 打印结果</span>
<span class="token comment">// html-js</span>
<span class="token comment">// demo-js</span>
<span class="token comment">// demo1-js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>async 是在加载完成后立即执行,如果是多个,执行顺序与加载顺序无关</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// demo.js</span>
<span class="token comment">// console.log('demo-js');</span>
<span class="token comment">// -----------------</span>
<span class="token comment">// demo1.js</span>
<span class="token comment">// console.log('demo1-js');</span>
<span class="token comment">// -----------------</span>
<span class="token comment">// html结构</span>
<span class="token comment">// &lt;script src=&quot;./demo.js&quot; async&gt;&lt;/script&gt;</span>
<span class="token comment">// &lt;script src=&quot;./demo1.js&quot; async&gt;&lt;/script&gt;</span>

<span class="token comment">// &lt;script&gt;</span>
<span class="token comment">//   console.log('html-js');</span>
<span class="token comment">// &lt;/script&gt;</span>

<span class="token comment">// 打印结果</span>
<span class="token comment">/*
  html-js
  demo-js
  demo1-js
*/</span>
<span class="token comment">// 或</span>
<span class="token comment">/*
  html-js
  demo1-js
  demo-js
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="什么是浏览器缓存"><a href="#什么是浏览器缓存" class="header-anchor">#</a> 什么是浏览器缓存</h4> <ul><li>资源文件在电脑磁盘上的备份</li></ul> <h4 id="缓存的分类"><a href="#缓存的分类" class="header-anchor">#</a> 缓存的分类</h4> <ul><li><p>强缓存</p> <ul><li>特点: 不请求,直接使用缓存</li> <li>相关 HTTP 头部字段:
<ul><li>Expires: 过期时间,是个绝对时间,下发的是服务器时间,比较用的是客户端时间,所有有偏差</li> <li>Cache-control: 过期时间,是个相对时间,优先级高,以客户端的相对时间为准,浏览器拿到资源之后的多少时间内都不会再去服务器请求</li></ul></li></ul></li> <li><p>协商缓存</p> <ul><li>特点: 浏览器不确定备份是否过期,需要与服务器请求确认.</li> <li>相关 HTTP 头部字段:
<ul><li>1.Last-Modified/if-Modified-Since 服务器下发时间,客户端请求时间是带上下发时间,服务器判断文件是否过期,存在的问题服务器下发时间难以定义</li> <li>2.Etag/if-None-Match: 服务器下发 hash 值,客户端请求时带上 hash 值,服务器判断文件是否过期,优先级高.</li></ul></li></ul></li></ul> <h4 id="什么是-cdn"><a href="#什么是-cdn" class="header-anchor">#</a> 什么是 CDN?</h4> <ul><li>特点: 在不同的地方缓存内容,将用户的请求定到最合适的缓存服务器上去获取内容</li> <li>优点: 解决 internet 网络拥堵,提高用户访问网络的相应速度</li></ul> <h4 id="预解析-dns"><a href="#预解析-dns" class="header-anchor">#</a> 预解析 DNS</h4> <ul><li>DNS 预解析会消耗前端的性能,优化建议: 减少 DNS 请求次数,进行 DNS 预解析</li> <li>方式: 让具有此属性的域名自动在后台解析,从而减少用户的等待时间,提升用户体验</li></ul> <h4 id="如何开启-dns-预解析"><a href="#如何开启-dns-预解析" class="header-anchor">#</a> 如何开启 DNS 预解析</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x-dns-prefetch-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>on<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
(强制打开a标签的DNS预解析,https下默认关闭)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//lanmaom.com<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="渲染机制"><a href="#渲染机制" class="header-anchor">#</a> 渲染机制</h3> <h4 id="dtd-是什么"><a href="#dtd-是什么" class="header-anchor">#</a> DTD 是什么</h4> <ul><li>文档类型定义,浏览器会使用它来判断文档类型,从而决定使用何种协议来解析</li></ul> <h4 id="doctype-是什么"><a href="#doctype-是什么" class="header-anchor">#</a> DOCTYPE 是什么</h4> <ul><li>文档类型声明,通知浏览器当前文件用的是哪个 DTD</li></ul> <h4 id="浏览器的渲染过程是怎样的"><a href="#浏览器的渲染过程是怎样的" class="header-anchor">#</a> 浏览器的渲染过程是怎样的</h4> <ul><li>1.HTML 被解析成 DOM tree CSS 被解析成 CSS Rule tree (同时进行)</li> <li>2.在布局阶段, DOM tree 和 CSS Rule tree 整合成 render tree (如果上面 DOM tree 或 CSS Rule tree 有一个没有解析完成,布局阶段永远不会进行)</li> <li>3.元素按照算出来的规则,把元素放到它该出现的位置,通过显卡画到屏幕上</li></ul> <h4 id="重排-reflow-与重绘-repaint"><a href="#重排-reflow-与重绘-repaint" class="header-anchor">#</a> 重排(Reflow)与重绘(Repaint)</h4> <ul><li><p>重排</p> <ul><li>定义: DOM 中各个元素都有自己的盒子模型,需要浏览器根据样式进行计算,并根据计算结果将元素放到特定位置,这就是重排</li> <li>触发条件:
<ul><li>增.删.改.移 DOM</li> <li>修改 CSS 样式</li> <li>改变浏览器窗口的大小</li> <li>页面滚动</li> <li>修改网页的默认字体</li> <li>获取一些 style 信息时 ,offsetWidth, offsetHeight, ...</li></ul></li></ul></li> <li><p>重绘</p> <ul><li>当各种盒子的位置,大小以及其他属性改变时,浏览器需要吧这些元素都按照各自的特性回执一遍,这个过程为重绘</li> <li>触发条件:
<ul><li>DOM 改动</li> <li>CSS 某些改动样式的改动,比如 颜色</li></ul></li></ul></li></ul> <h4 id="如果减少重绘重排"><a href="#如果减少重绘重排" class="header-anchor">#</a> 如果减少重绘重排</h4> <ul><li>将多次改变样式属性的操作合并成一次操作</li> <li>将需要多次重排的元素,position:absolute/fixed;(脱离文档流),它的变化就不会影响到其他元素.例如有动画效果的元素</li> <li>将对一个元素复杂操作时,先 display:none;操作完成后再显示.这样只在隐藏和显示时触发两次重排.</li></ul> <h3 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h3> <h4 id="http-的主要特点"><a href="#http-的主要特点" class="header-anchor">#</a> HTTP 的主要特点</h4> <ul><li>无状态</li> <li>无连接</li></ul> <h4 id="http-报文的组成部分"><a href="#http-报文的组成部分" class="header-anchor">#</a> HTTP 报文的组成部分</h4> <ul><li>请求报文: 请求行 请求头 空行 请求体</li> <li>响应报文: 状态行 响应头 空行 响应体
<ul><li>请求头: HTTP 方法,页面地址,http 协议及版本</li> <li>请求头: key-value 值,告诉服务端需要的内容</li> <li>空行: 告知服务端一下内容为请求体</li> <li>请求体: 数据部分</li></ul></li></ul> <h4 id="常见的-http-方法"><a href="#常见的-http-方法" class="header-anchor">#</a> 常见的 HTTP 方法</h4> <ul><li>GET 获取资源</li> <li>POST 传输资源</li> <li>PUT 更新资源</li> <li>DELETE 删除资源</li> <li>HEAD 获得报文首部</li></ul> <h4 id="get-和-post-的区别是什么"><a href="#get-和-post-的区别是什么" class="header-anchor">#</a> GET 和 POST 的区别是什么?</h4> <ul><li><p>优势</p> <ul><li>GET 请求回退是无害的,而 POST 请求回退会再次提交请求</li> <li>GET 请求会被浏览器主动缓存, 而 POST 不会,除非手动设置</li></ul></li> <li><p>劣势</p> <ul><li>GET 请求不安全,参数暴露在 URL 上,并且会完整保留在浏览器的历史记录里</li> <li>GET 请求在 URL 中传递的参数是有长度限制的,POST 没有限制</li></ul></li></ul> <h4 id="状态码表示的含义是"><a href="#状态码表示的含义是" class="header-anchor">#</a> 状态码表示的含义是?</h4> <ul><li><ol><li>1XX 指示信息:请求已接收,继续处理</li></ol></li> <li><ol start="2"><li>2XX 成功,请求已经被成功接收</li></ol></li> <li><ol start="3"><li>3XX 重定向</li></ol></li> <li><ol start="4"><li>4XX 客户端错误</li></ol></li> <li><ol start="5"><li>5XX 服务器错误</li></ol></li></ul> <h4 id="常见状态码"><a href="#常见状态码" class="header-anchor">#</a> 常见状态码</h4> <ul><li>200 请求成功</li> <li>302 页面重定向</li> <li>304 服务器已执行 GET,但文件未变化</li> <li>401 请求未经授权,必须与 WWW-Authenticate 报头域一起使用</li> <li>404 请求资源不存在</li> <li>500 服务器发生了不可预期的错误</li> <li>503 请求未完成,服务器临时过载或宕机</li></ul> <h4 id="ajax-的请求原理"><a href="#ajax-的请求原理" class="header-anchor">#</a> AJAX 的请求原理</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'GET'</span><span class="token punctuation">,</span> <span class="token string">'/abc/bcd'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="http-的三次握手"><a href="#http-的三次握手" class="header-anchor">#</a> HTTP 的三次握手</h4> <ul><li>第一次握手: 建立连接.客户端发送请求报文,将 SYN(是一个标识)设置 1,Sequence Number 设置 x,客户端进入 SYN_SEND 状态,等待服务器确认</li> <li>第二次握手: 服务器收到 SYN 报文段。服务器收到客户端的 SYN 报文段，需要对这个 SYN 报文段进行确认，设置 Acknowledgment Number 为 x+1(Sequence Number+1)；同时，自己自己还要发送 SYN 请求信息，将 SYN 位置为 1，Sequence Number 为 y；服务器端将上述所有信息放到一个报文段（即 SYN+ACK 报文段）中，一并发送给客户端，此时服务器进入 SYN_RECV 状态；</li> <li>第三次握手: 客户端收到服务器的 SYN+ACK 报文段。然后将 Acknowledgment Number 设置为 y+1，向服务器发送 ACK 报文段，这个报文段发送完毕以后，客户端和服务器端都进入 ESTABLISHED 状态，完成 TCP 三次握手</li></ul> <blockquote><p>为什么三次握手</p></blockquote> <ul><li>防止已失效的请求报文段突然又传送到了服务端,因而产生错误</li></ul> <h3 id="通讯类"><a href="#通讯类" class="header-anchor">#</a> 通讯类</h3> <h4 id="websocket-双工通信协议"><a href="#websocket-双工通信协议" class="header-anchor">#</a> WebSocket 双工通信协议</h4> <blockquote><p>为什么需要 WebSocket? HTTP 协议有一个缺陷: 通信只能由客户端发起. WebSocket 可以由服务端主动推送消息给客户端</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 客户端代码</span>
<span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'wss://echo.websocket.org'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 连接打开</span>
  ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Received Message'</span> <span class="token operator">+</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

ws<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Connection closed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="web-worker"><a href="#web-worker" class="header-anchor">#</a> Web Worker</h4> <blockquote><p>作用: 为 javascript 创造多线程环境,允许主线程创建 Worker 线程,将一些任务分配给后者运行</p></blockquote> <h5 id="webworker-使用注意点"><a href="#webworker-使用注意点" class="header-anchor">#</a> webWorker 使用注意点</h5> <ul><li>同源限制: 分配给 Worker 线程运行的脚本文件,必须与主线程脚本同源</li> <li>DOM 限制: Worker 线程所在的全局对象,与主线程不一样,无法读取主线程所在网页的 DOM 对象,也无法使用 <code>document</code>,<code>window</code>,<code>parent</code> 这些对象.但是 Worker 线程可以使用 <code>navigator</code> 对象和 <code>location</code> 对象</li> <li>通信联系: Worker 线程和主线程不在同一个上下文环境,他们不能直接通信,必须通过消息完成</li> <li>脚本限制: Worker 线程不能执行 <code>alert()</code>方法和<code>confirm()</code>方法,但是可以使用 XMLHttpRequest 对象发出 AJAX 请求</li> <li>文件限制: Worker 线程无法读取本地文件,即不能打开本机的文件系统(<code>file//</code>),它所加载的脚本,必须来自网络</li></ul> <h5 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h5> <blockquote><p>主线程
主线程采用<code>new</code>命令,调用<code>Worker()</code>构造函数,新建一个 Worker 线程</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">'work.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Hello Worker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'echo'</span><span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Work'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//关闭Worker</span>
work<span class="token punctuation">.</span><span class="token function">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//执行任务</span>
  worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'work done'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><code>Worker</code> 构造函数的参数是一个脚本文件,改文件就是 Worker 所要执行的任务,因为 Worker 不能读取本地文件,所以这个脚本必须来自网络,或通过服务器的形式打开,否则 Worker 会默认失败</li> <li>然后主线程调用 <code>worker.postMessage()</code> 方法,向 Worker 发消息</li> <li><code>worker.postMessage()</code> 方法的参数,就是主线程 Worker 的数据,它可以是各种类型,包括二进制数据</li> <li>接着, 主线程通过<code>worker.onmessage</code>指定监听函数,接收子线程发回来的消息.</li> <li>上面代码中,事件对象的<code>data</code>属性可以获取 Worker 发来的数据</li> <li>Worker 完成任务后,主线程就可以把它关掉了</li></ul> <blockquote><p>Worker 线程
worker 线程内部需要有一个监听函数,监听<code>message</code>事件</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// self 代表子线程自身,即子线程全局对象,因此 也可以写成 `this `或 `什么都不写 `</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'message'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'you say'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或</span>
<span class="token comment">// 可以根据主线程发来的数据,worker 线程可以调用不同的方法,例如:</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'message'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>cmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'start'</span><span class="token operator">:</span>
        self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'WORKER STARTED: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">'stop'</span><span class="token operator">:</span>
        self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'WORKER STOPPED: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        self<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Terminates the worker.</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Unknown command: '</span> <span class="token operator">+</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭Worker</span>
self<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><blockquote><p>Worker 加载脚本
Worker 内部如果要加载其他脚本,有一个专门的方法<code>importScripts()</code></p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'a.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 也可以同时加载多个脚本</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">'a.js'</span><span class="token punctuation">,</span> <span class="token string">'b.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>错误处理
主线程可以监听 Worker 是否发生错误,如果发生错误,Worker 会触发主线程的<code>error</code>事件</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>worker<span class="token punctuation">.</span><span class="token function">onerror</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token string">'ERROR: Line '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>lineno<span class="token punctuation">,</span> <span class="token string">' in '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> <span class="token string">': '</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>message<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 或者</span>
worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Worker 内部也可以监听 error 事件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="iframe-怎么通信"><a href="#iframe-怎么通信" class="header-anchor">#</a> iframe 怎么通信</h5> <blockquote><p>通过 postMessage 方式通信 <code>otherWindow.postMessage(message, targetOrigin, [transfer]);</code></p></blockquote> <ul><li>otherwindow: 其他窗口的引入, 例如 iframe 的 contentWindow, 执行 window.open 返回的窗口对象,或者命名过数值索引的 window.iframes</li> <li>message: 将要发送的数据</li> <li>targetOrigin 指定那些窗口能接受到消息事件, 值可以是字符串 <code>*</code> 表示无限制,或者是一个<code>URL</code></li> <li>transfer: 是一串和 message 同时传递的 transferable 对象, 这些对象的所有权将被转移给消息的接收方,而发送方将不再保留所有权</li></ul> <blockquote><p>postMessage 方法被调用时,会在所有页面脚本执行完毕后像目标窗口派发一个 <code>MessageEvent</code>消息, 改 MessageEvent 消息有四个属性需要注意:</p></blockquote> <ul><li>type: 表示该 message 的类型</li> <li>data: 为 postMessage 的第一个参数</li> <li>origin: 表示调用 postMessage 方法窗口的源</li> <li>source: 记录调用 postMessage 方法的窗口对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 父页面向子页面传参</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ele<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//例如 http://127.0.0.1:8888</span>
  <span class="token comment">//  或者</span>
  window<span class="token punctuation">.</span>frames<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//例如 http://127.0.0.1:8888</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 子页面向父页面传参</span>
top<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> targetOrigin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//例如: http://127.0.0.1:9999/father.html ,精确到页面</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>父页面或子页面接收参数(都是一样的写法)</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//子页面传来的数据</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>测试代码</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--
  注意在测试的时候
    1.需要通过Server打开
    2.路径不能写成 localhost ,如果是本地,请写: http://127.0.0.1
--&gt;</span>

<span class="token comment">&lt;!-- iframe1 --&gt;</span>
<span class="token comment">&lt;!-- father.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>主页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myFrame<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://127.0.0.1:8888/son.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>主页面接收消息区域<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
      <span class="token string">'message'</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'父元素收到信息了:'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token boolean">false</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      document
        <span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'myFrame'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'father said'</span><span class="token punctuation">,</span> <span class="token string">'http://127.0.0.1:8888'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 或者</span>
      <span class="token comment">// window.frames[0].postMessage('123', 'http://127.0.0.1:9999')</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- iframe2 --&gt;</span>
<span class="token comment">&lt;!-- son.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>子页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>接收消息区域<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//发送消息</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">'Hello!  The time is: '</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span>top<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">'http://127.0.0.1:9999/father.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
      <span class="token string">'message'</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// top.postMessage('消息收到', 'http://127.0.0.1:9999/father.html')</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token boolean">false</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h4 id="什么是跨域通信"><a href="#什么是跨域通信" class="header-anchor">#</a> 什么是跨域通信</h4> <ul><li>一个域下的文档或脚本试图去请求另一个域下的资源</li></ul> <h4 id="前后端的通信有哪些"><a href="#前后端的通信有哪些" class="header-anchor">#</a> 前后端的通信有哪些</h4> <ul><li>ajax: 同源下的通信</li> <li>WebSocket: 不受同源策略限制</li> <li>CORS: 支持跨域通信,也支持同源通信</li></ul> <h4 id="跨域的解决方案有哪些"><a href="#跨域的解决方案有哪些" class="header-anchor">#</a> 跨域的解决方案有哪些</h4> <ul><li>0.document.domain 跨域</li> <li>1.jsonp 跨域</li> <li>2.location.hash 跨域</li> <li>3.postMessage 跨域</li> <li>4.WebSocket 跨域</li> <li>5.CORS 跨域(后台设置响应头)</li> <li>6.反向代理(在 vue 中经常用到)</li></ul> <hr> <ul><li><p>0.document.domain</p> <blockquote><p>场景: 两个网页一级域名相同,只是二级域名不同
方案: 浏览器允许通过设置 document.domain 共享 Cookie.这种方法只适用于 Cookie 和 iframe 窗口,LocalStroge 和 IndexDB 无法通过这种方法</p></blockquote></li> <li><p>1.jsonp 跨域</p></li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>// 客户端实现：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>

  <span class="token comment">// 传参并指定回调执行函数为onBack</span>
  script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://www.domain2.com:8080/login?user=admin&amp;callback=onBack'</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 回调执行函数</span>
  <span class="token keyword">function</span> <span class="token function">onBack</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
// 服务端（返回时即执行全局函数） onBack({&quot;status&quot;: true, &quot;user&quot;: &quot;admin&quot;})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><p>2.location.hash 跨域</p> <blockquote><p>场景: 当前页面 A 通过 iframe 或 frame 嵌入了跨域的页面 B</p></blockquote></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在A中的伪代码</span>
<span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementByTagName</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">B</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">.</span>src <span class="token operator">+</span> <span class="token string">'#'</span> <span class="token operator">+</span> data<span class="token punctuation">;</span>

<span class="token comment">// 在B中的伪代码</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> data <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p>3.postMessage 跨域</p> <blockquote><p>HTML5 引入跨文档通信 API，这个 API 为 window 对象新增了一个 window.postMessage 方法，允许跨窗口通信，不论这两个窗口是否同源</p></blockquote></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 例如，窗口A(http:A.com)向跨域的窗口B(http:B.com)发送信息</span>
<span class="token keyword">var</span> popup <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'http://B.com'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
popup<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">,</span> <span class="token string">'http://B.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在窗口B中监听</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'message'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>origin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 消息发向的网址</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 发送消息的窗口</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 消息内容</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>4.WebSocket 跨域</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> ws <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebSocket</span><span class="token punctuation">(</span><span class="token string">'wss://echo.websocket.org'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Connection open ...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hello WebSockets!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Received Message: '</span><span class="token punctuation">,</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
ws<span class="token punctuation">.</span><span class="token function-variable function">onclose</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Connection closed.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>5.CORS 跨域(后台设置响应头)</li></ul> <h3 id="安全类"><a href="#安全类" class="header-anchor">#</a> 安全类</h3> <h4 id="常见攻击方式有哪些"><a href="#常见攻击方式有哪些" class="header-anchor">#</a> 常见攻击方式有哪些</h4> <ul><li>CSRF: 跨站请求伪造</li> <li>XSS: 跨站脚本攻击</li></ul> <h4 id="csrf-的原理及防御措施"><a href="#csrf-的原理及防御措施" class="header-anchor">#</a> CSRF 的原理及防御措施</h4> <ul><li>攻击原理:
<ul><li>F 是网站 A 的用户，且已登录，网站 A 对用户 F 进行身份认证后下发了 cookie，保存在 F 浏览器中。</li> <li>F 访问网站 B，网站 B 存在引诱点击（往往是个链接，指向网站 A 的 API 接口，通常是 GET 类型），然后访问了 A 网站，浏览器会自动上传 cookie。</li> <li>网站 A 对传来的 cookie 进行确认，是合法用户，则执行接口的动作</li></ul></li> <li>前提:
<ul><li>网站 A 某个接口存在漏洞</li> <li>用户在网站 A 已登录</li></ul></li> <li>防御措施:
<ul><li>Token 验证：用户访问网站时，服务器会自动向本地存储 token，访问接口时，需要回传 token，否则无法通过验证</li> <li>Referer 验证：服务器判断页面来源是否为站点下的页面，如果不是，则拦截</li> <li>隐藏令牌：与 token 类似，使用方式上的差别，更加隐蔽(比如放在 http 头部)</li></ul></li></ul> <h4 id="xss-的原理及防御措施"><a href="#xss-的原理及防御措施" class="header-anchor">#</a> XSS 的原理及防御措施</h4> <ul><li>攻击原理: 向页面的合法渠道注入脚本 (在脚本里执行想做的事情,不一定要登录)</li> <li>攻击方式:
<ul><li>反射型：发出请求时，XSS 代码出现在 URL 中，作为输入传给服务器，服务器解析后响应，XSS 代码随响应内容传回浏览器，最后浏览器执行 XSS 代码，比如插入广告、执行恶性代码（img onerror）、引诱用户点击（按钮点击）</li> <li>存储型：提交的代码会存储在服务器端（数据库、内存、文件系统等），下次请求目标页面时不用再提交 XSS 代码。</li></ul></li> <li>防御措施(让插入的脚本不可执行):
<ul><li>编码：对用户输入的内容进行 HTML Entity 转义，例如&lt;/ body&gt;，如果不转义，直接输出到页面上时，DOM 结构就被破坏了。同时还要避免直接进行 HTML Entity 解码，否则，编码跟过滤就失去了意义。</li> <li>过滤:
<ul><li>移除用户上传的 DOM 属性，如 onerror 等跟事件相关的属性</li> <li>移除用户上传的 Style 节点、Script 节点、iframe 节点、frame 节点等</li></ul></li> <li>校正：使用 DOM Parse 转换（类似的第三方库有 domParse），校正不配对的 DOM 标签，防止用户输入的内容破坏掉我们页面的 DOM 结构。</li></ul></li></ul> <h3 id="前端性能优化的关键时间点"><a href="#前端性能优化的关键时间点" class="header-anchor">#</a> 前端性能优化的关键时间点</h3> <h4 id="前端性能优化的关键时间点有哪些-分别是什么"><a href="#前端性能优化的关键时间点有哪些-分别是什么" class="header-anchor">#</a> 前端性能优化的关键时间点有哪些,分别是什么</h4> <ul><li>开始渲染时间: 浏览器开始绘制页面,在此之前,页面都是白屏,所以也称为白屏时间</li> <li>DOM Ready: dom 解析已经完成,资源还没有加载完成,这个时候用户与页面的交互已经可用了</li> <li>首屏时间: 用户看到第一屏页面的时间</li> <li>onload: 原始文档和所有引用的内容已经加载完成,用户最明显的感觉就是浏览器上的 loading 状态结束</li></ul> <h4 id="开始时间如何获取-如何优化"><a href="#开始时间如何获取-如何优化" class="header-anchor">#</a> 开始时间如何获取,如何优化?</h4> <ul><li>获取方式
<ul><li>Chrome 可通过 chrome.loadTimes().firstPaintTime 获取</li> <li>IE9+ 可通过 performance.timing.msFirstPaint</li> <li>在不支持的浏览器中可以根据上面公式通过获取头部资源加载完成的时刻模拟获近似值</li></ul></li> <li>优化建议
<ul><li>优化服务器响应时间,服务端尽早输出</li> <li>减少 html 文件大小</li> <li>减少头部资源,脚本尽量放在 body 中</li></ul></li></ul> <h4 id="dom-ready-时间如何获取-如何优化"><a href="#dom-ready-时间如何获取-如何优化" class="header-anchor">#</a> DOM Ready 时间如何获取? 如何优化?</h4> <ul><li>获取方式:
<ul><li>高级浏览器通过 DOMContentLoaded 事件获取</li> <li>低版本 webkit 内核浏览器可以通过轮询 document.readyState 来实现</li> <li>IE 中可以通过 setTimeout 不断调用 documentElement 的 doScroll 方法,直到其可用来实现(可参考 jQuery 的实现)</li></ul></li> <li>优化建议:
<ul><li>减少 dom 结果的复杂度,节点尽可能少,嵌套不要太深</li> <li>优化关键呈现路径</li></ul></li></ul> <h4 id="首屏时间如何获取-如何优化"><a href="#首屏时间如何获取-如何优化" class="header-anchor">#</a> 首屏时间如何获取? 如何优化?</h4> <ul><li>获取方式(这个时间点很重要但是很难获取，一般都只能通过模拟获取一个近似时间)
<ul><li>不断获取屏幕截图，当截图不再变化时，可以视为首屏时间</li> <li>一般影响首屏的主要因素是图片的加载，通过页面加载完后判断图片是否在首屏内，找出加载最慢的一张即可视为首屏时间。</li></ul></li> <li>优化建议
<ul><li>页面首屏的显示尽量不要依赖于 js 代码，js 尽量放到 domReady 后执行或加载</li> <li>首屏外的图片延迟加载</li> <li>首屏结构尽量简单，首屏外的 css 可延迟加载</li></ul></li></ul> <h4 id="onload-时间如何获取-如何优化"><a href="#onload-时间如何获取-如何优化" class="header-anchor">#</a> onload 时间如何获取? 如何优化?</h4> <ul><li>获取方式: 该时间点是 window.onload 事件触发的时间</li> <li>优化建议:
<ul><li>减少资源的请求数和文件大小</li> <li>将非初始化脚本放到 onLoad 之后执行</li> <li>无需同步的脚本异步加载</li></ul></li></ul> <h2 id="vue"><a href="#vue" class="header-anchor">#</a> VUE</h2> <h3 id="基础部分"><a href="#基础部分" class="header-anchor">#</a> 基础部分</h3> <h4 id="vue-数据双向绑定的原理"><a href="#vue-数据双向绑定的原理" class="header-anchor">#</a> vue 数据双向绑定的原理</h4> <ul><li>vue 在初始化实例的时候,会把 data 中的所有数据,用 Object.defineProperty 方法全部加给 vm 对象,这个时候 vm 对象就有了 set 和 get 方法,set 方法在属性被赋值的时候自动调用,get 方法在属性被获取值的时候自动调用,用户获取到的属性的值,其实就是 set 或 get 的返回值,也就能实现双向绑定了.</li></ul> <h4 id="v-model-语法糖"><a href="#v-model-语法糖" class="header-anchor">#</a> v-model 语法糖</h4> <blockquote><p>v-model 用来实现数据双向绑定,一般用在表单元素中</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input
  <span class="token comment">// 数据 -&gt; 视图</span>
  v<span class="token operator">-</span>bind<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">'msg'</span>
  <span class="token comment">// 视图 -&gt; 数据</span>
  v<span class="token operator">-</span>on<span class="token operator">:</span>input<span class="token operator">=</span><span class="token string">'msg = $event.target.value'</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// $event表示事件对象, 在文本框中输入内容,会触发 input 事件,事件触发的时候: 通过事件对象获取到当前文本框的value值,然后赋值给 msg 数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="组件之间的数据双向绑定"><a href="#组件之间的数据双向绑定" class="header-anchor">#</a> 组件之间的数据双向绑定</h5> <blockquote><p>组件之前的数据双向绑定语法糖省略了父组件中接收参数的 input 方法</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 父组件</span>
<span class="token operator">&lt;</span>childComponent v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// 子组件</span>
<span class="token comment">// &lt;button @click=&quot;fn&quot;&gt;点击将myMsg数据传给父组件&lt;/button&gt;</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">myMsg</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>myMsg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="mvvm-和-mvc"><a href="#mvvm-和-mvc" class="header-anchor">#</a> MVVM 和 MVC</h4> <ul><li>MVVM
<ul><li>M 数据模型</li> <li>V 视图</li> <li>VM 视图模型</li></ul></li> <li>MVC
<ul><li>M 数据模型</li> <li>V 视图</li> <li>C 控制器(是视图和数据模型沟通的桥梁,用于处理业务逻辑)</li></ul></li> <li>优势
<ul><li>MVC 模式,将应用程序划分为三大部分,实现了职责分离</li> <li>但是,在前端中经常要通过 js 代码来进行一些逻辑操作, 最终还要把这些逻辑操作的结果展示在页面上.也就需要频繁的操作 DOM</li> <li>MVVM 通过 <code>数据双向绑定</code>让数据自动地双向同步
<ul><li>V(修改视图) -&gt; M</li> <li>M(修改数据) -&gt; V</li></ul></li> <li>数据驱动视图的思想,数据是核心</li></ul></li></ul> <h4 id="双向数据绑定的原理"><a href="#双向数据绑定的原理" class="header-anchor">#</a> 双向数据绑定的原理</h4> <ul><li>原理:
<ul><li>数据劫持,<code>Object.defineProperty</code> 中的<code>get</code>和<code>set</code>方法</li></ul></li> <li>作用:
<ul><li>指定<code>读取或设置</code>对象属性值得时候,执行的操作</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'msg'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置 obj.msg 执行的操作</span>
  <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 读取obj.msg执行的操作</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="怎样动态的添加数据"><a href="#怎样动态的添加数据" class="header-anchor">#</a> 怎样动态的添加数据</h4> <ul><li>注意: 只有 data 中的数据才是响应式的,动态添加进来的数据默认认为是非响应式</li> <li>可以通过以下方式实现动态数据的响应式
<ul><li><code>Vue.set(object, key, value)</code> -- 适用添加单个属性</li> <li><code>Object.assign()</code> -- 适用添加多个属性</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">stu</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jack'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过Vue.set方式</span>
Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>stu<span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">,</span> <span class="token string">'male'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 通过Vue.assign</span>
vm<span class="token punctuation">.</span>stu <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> vm<span class="token punctuation">.</span>stu<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">do</span><span class="token operator">:</span> <span class="token string">'happy'</span><span class="token punctuation">,</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'189'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="vue-中的组件通讯"><a href="#vue-中的组件通讯" class="header-anchor">#</a> Vue 中的组件通讯</h4> <ul><li>父组件向子组件传值 props</li> <li>子组件向父组件传值 $emit</li> <li>父子,兄弟,跨级组件通讯 bus</li> <li>Vuex 状态管理</li> <li>provide/inject</li> <li>$parent/$children</li></ul> <hr> <ul><li>父子通信
<ul><li>props/$emit; $parent/$children; provide/inject</li></ul></li> <li>兄弟通信
<ul><li>Bus;Vuex</li></ul></li> <li>跨级通信
<ul><li>Bus; Vuex; provide/inject;</li></ul></li></ul> <hr> <ul><li>父子,兄弟,跨级组件通讯 bus</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 新建bus.js</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">var</span> bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> bus

<span class="token comment">// 创建一个事件</span>
在<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">mounted</span><span class="token template-punctuation string">`</span></span>中
<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'自定义方法名称'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 接收参数</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 触发这个事件</span>
bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'自定义方法名称'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">//data 需要传的参数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>Vuex 状态管理</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义数据</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//vuex里的数据</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//相当于计算属性</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 可以理解为 修改state里的状态,同步</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 修改state里的状态, 异步</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 在vuex里面调用mutations里的方法 commit('方法名',要传的数据)</span>

<span class="token comment">// 在组件中调用mutations对象里的方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'方法名'</span><span class="token punctuation">,</span> 参数<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在组件中调用actions对象里的方法</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'方法名'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果开启了namespaced: true的模式, dispatch()里面应该要加上模块名,如果模块内部没有设置模块名, 默认就是这个模块的文件名.例如:this.$store.dispatch('user/getUserInfo')</span>

<span class="token comment">// module模式</span>
<span class="token comment">/*
  将文件挂载到vuex上
  import details from './details'
  modules: {
    details
  }

  // 在模块中
  export default {
    namespaced: 'details',
    state: {
      a:'',
      b:''
    },
    getters: {},
    mutations: {},
    actions: {}
  }

  // 在组件中使用 (注意: 使用...mapState('details',['a','b'])这种形式的时候,方法名或数据要加 ' 引号)
  import { mapState, mapGetters, mapMutations, mapActions } from 'vuex'

  computed: {
    ...mapState('details',['a','b']) 或者通过自定义命名 ...mapState('details', { mya: a,myb:b })
    ...mapGetters('details',['方法名','方法名']) 或者通过自定义命名 ...mapState('mapGetters', { 自定义方法名: 方法名 })
  },
  methods: {
    ...mapMutations('details', ['方法名'])
    ...mapActions('details', ['方法名'])
  }
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><ul><li>provide/inject
<ul><li>介绍: 允许一个祖先组件想后代注入一个依赖,不论组件层次有多深,并在起上下游关系成立的时间里始终生效</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 爷爷组件  传递参数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">provide</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'我是你爷爷'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 孙子组件 接收参数</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>$parent/$children 与 ref
<ul><li>父元素主动调用子元素里的事件,或使用子元素里的数据</li> <li>ref: 如果在普通的 DOM 元素上使用,引用指向的就是 DOM 元素; 如果用在子组件上,引用就指向组件实力</li> <li>$parent/children: 访问父/子实例</li> <li>弊端: 无法在跨级或兄弟间通信</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>component<span class="token operator">-</span>a ref<span class="token operator">=</span><span class="token string">'domA'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token comment">// this.$refs.domA.数据名</span>
<span class="token comment">// this.$refs.domA.方法名</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="插槽-slot"><a href="#插槽-slot" class="header-anchor">#</a> 插槽 slot</h4> <ul><li>当组件内容不固定的时候,通过 slot 接收</li></ul> <h4 id="路由传参的几种方式"><a href="#路由传参的几种方式" class="header-anchor">#</a> 路由传参的几种方式</h4> <ul><li>1.query 传参
<ul><li>url 中显示参数</li> <li>使用
<ul><li>this.$router.push({path: '路由',query: {}})</li> <li>获取传递的参数: <code>this.$route.query</code></li></ul></li></ul></li> <li>2.params 传参
<ul><li>url 中不显示参数</li> <li>使用:
<ul><li>this.$router.push({name:'路由的名称',params: {}})</li> <li>获取传递的参数: <code>this.$route.params</code></li></ul></li></ul></li> <li>3.通过配置路由来实现参数跳转</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 路由配置</span>
<span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/details/:id'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'details'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">component</span><span class="token operator">:</span> details
<span class="token punctuation">}</span>
<span class="token comment">// 跳转方式</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/details/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h4> <ul><li>作用:
<ul><li>在组件切换过程中将状态保留在内存中,防止重复渲染 DOM,减少加载时间及性能消耗,提高用户体验</li></ul></li> <li>props
<ul><li>include 字符串或正则表达式. 只有名称匹配的组件才被缓存</li> <li>exclude 字符串或正则表达式. 任何匹配到的组件都不会缓存</li> <li>max 数字. 最多可以缓存多少组件实例</li></ul></li> <li>生命周期函数
<ul><li>activated
<ul><li>在 keep-alive 组件激活时调用</li> <li>该钩子函数在服务器端渲染期间不被调用</li></ul></li> <li>deactivated
<ul><li>在 keep-alive 组件停用时调用</li> <li>该钩子函数在服务器端渲染期间不被调用</li></ul></li></ul></li></ul> <blockquote><p>结合 router 使用 keep-alive</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* router.js*/</span>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/components/home/home'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">Goods</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/components/Goods/Goods'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
      <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token string">'goods'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'goods'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'goods'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">component</span><span class="token operator">:</span> Goods<span class="token punctuation">,</span>
          <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        	<span class="token literal-property property">keepAlive</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 不需要缓存</span>
      	  <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/* App.vue */</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$route.meta.keepAlive&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;!$route.meta.keepAlive&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="nexttick-异步-dom-更新"><a href="#nexttick-异步-dom-更新" class="header-anchor">#</a> nextTick (异步 DOM 更新)</h4> <ul><li>说明: Vue 异步执行 DOM 更新,监视所有数据改变,一次性更新 DOM</li> <li>优势: 可以去除重复数据,避免不必要的计算和重复 DOM 操作</li> <li><code>Vue.nextTick(callback)</code>: 在 DOM 更新后,执行某个操作(DOM 操作)
<ul><li>vm.$nextTick(() =&gt; {})</li> <li>$el: 表示 Vue 管理区域的根元素,是一个 DOM 对象</li></ul></li></ul> <h4 id="computed-和-watch-的区别"><a href="#computed-和-watch-的区别" class="header-anchor">#</a> computed 和 watch 的区别</h4> <ul><li><p>computed 支持缓存,只有数据依赖发生变化时,才会重新计算</p></li> <li><p>不支持异步, 当 computed 内有异步操作时无效,无法监听数据的变化</p></li> <li><p>computed 属性值默认会走缓存,计算属性是基于它们的响应式依赖进行缓存的,也就是基于 data 中声明过或父组件传递的 props 中的数据通过计算得到的值</p></li> <li><p>computed 属性属性值是函数,默认会走 get 方法,函数的返回值就是属性的返回值,在 computed 中,属性有一个 get 和 set 方法,数据变化,调用 set 方法</p></li> <li><p>多对一或一对一</p></li> <li><p>watch 不支持缓存,数据变,直接触发相应的操作</p></li> <li><p>watch 支持异步</p></li> <li><p>一对多的情况</p></li></ul> <h3 id="内存泄漏"><a href="#内存泄漏" class="header-anchor">#</a> 内存泄漏</h3> <ul><li>如果一块内存无法被正常的管理(垃圾回收机制),那么就说这块内存泄漏了</li> <li>正常情况下,JS 引擎会定期查看应用程序中占用的每块内存是否还在被使用,如果这块内存不再被使用了,那么 JS 引擎通过垃圾回收机制 就把这块内存回收,然后,这块内存就可以继续被复用了</li> <li>如果垃圾回收机制无法回收一块,我们也无法访问的内存,我们就称这块内存泄漏了
<ul><li>常见场景:
<ul><li>缓存: 存在内存中的数据一直没有被清理掉</li> <li>作用域未释放</li> <li>无效的 DOM 引用</li> <li>定时器未清除</li></ul></li> <li>解决办法:
<ul><li>手动释放内存</li> <li>如果元素中有绑定事件,先解绑事件,再移除元素</li></ul></li></ul></li></ul> <h3 id="虚拟-dom"><a href="#虚拟-dom" class="header-anchor">#</a> 虚拟 DOM</h3> <ul><li><p>简单理解: 通过 JS 变量的形式对于我们真实的 DOM 进行替代.一个是通过变量的形式存在 JS 里的虚拟 DOM,一个是存在于浏览器里的真实 DOM,但两个都是一一对应的,不会缺少一个.</p></li> <li><p>这种替代的好处</p> <ul><li>因为浏览器中的真实 DOM 是由 C++代码实现的,DOM 节点其实很复杂</li> <li>虽然浏览器提供了一些 API 让我们可以通过 JS API 来操作 DOM, 但是这种成本很大,一方面是由于 DOM 本身就很复杂,另一方面是由于本身就是通过 JS 调用 C++代码,也是有开销的.</li></ul></li> <li><p>针对这种直接操作 DOM 开销很大的问题:</p> <ul><li>尽量少的直接对真实的 DOM 进行操作,就使用 js 变量的形式来模拟,加一个减一个都通过 js 变量来存储记录,最终把结果再渲染为浏览器上的真实 DOM</li></ul></li></ul> <h2 id="兼容性问题"><a href="#兼容性问题" class="header-anchor">#</a> 兼容性问题</h2> <h3 id="_1-android-端文字未垂直居中"><a href="#_1-android-端文字未垂直居中" class="header-anchor">#</a> 1.Android 端文字未垂直居中</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>1. 通过line-height等于height设置时有时会出现未垂直居中,换用flex布局的align-items: center;

2.小于12px大小的字体会偏上: 通过transform: scale() 和 transform-origin控制字体缩放
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-ios-页面底部-margin-bottom-失效"><a href="#_2-ios-页面底部-margin-bottom-失效" class="header-anchor">#</a> 2.ios 页面底部 margin-bottom 失效</h3> <ul><li>设置一个空的 div 撑起 margin-bottom 设置的高度</li></ul> <h3 id="_3-ios-的-select-不能选择第一项"><a href="#_3-ios-的-select-不能选择第一项" class="header-anchor">#</a> 3.ios 的 select 不能选择第一项</h3> <p>使用 v-model 绑定 select 且初始化没有匹配项时,ios 无法选择第一项,无法触发 change 事件</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>//解决办法: 添加第一项,并设置该项disabled及display:none
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>example-5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selected<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">disabled</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>请选择<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span><span class="token punctuation">&gt;</span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4-输入法弹窗导致窗口变小"><a href="#_4-输入法弹窗导致窗口变小" class="header-anchor">#</a> 4.输入法弹窗导致窗口变小</h3> <p>输入法弹窗显示时,会导致 window 窗口高度变小</p> <ul><li>场景:
<ul><li>页面 a,输入法弹窗显示时,跳到页面 b,会导致页面 b 通过 window.innerHeight 获取的高度有问题</li></ul></li> <li>解决方法:
<ul><li>1.跳转页面之前,先用 document.activeElement.blur()隐藏虚拟键盘,然后延时 300 毫秒再跳转</li> <li>2.跳转前先通过 window.innerHeight 获取输入法未弹起时的内容窗口高度,再通过地址拼接传递该高度.</li></ul></li></ul> <h3 id="_5-absolute-定位元素被输入法顶起"><a href="#_5-absolute-定位元素被输入法顶起" class="header-anchor">#</a> 5.absolute 定位元素被输入法顶起</h3> <ul><li>当 absolute 元素的父元素设置 height 等于屏幕高度时,输入法弹起,屏幕高度缩小,导致定位元素顶起,遮盖了其他元素</li> <li>解决方法:
<ul><li>input 获取焦点时,让定位元素隐藏或改成静态定位,失去焦点时恢复.</li></ul></li></ul> <h3 id="_6-多行文本溢出隐藏时显示不全"><a href="#_6-多行文本溢出隐藏时显示不全" class="header-anchor">#</a> 6.多行文本溢出隐藏时显示不全</h3> <div class="language-text line-numbers-mode"><pre class="language-text"><code>在添加溢出隐藏样式的盒子外再套一层父盒子,给父盒子设置固定高度,撑起来
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_7-移动端-placeholder-不垂直居中的问题"><a href="#_7-移动端-placeholder-不垂直居中的问题" class="header-anchor">#</a> 7.移动端 placeholder 不垂直居中的问题</h3> <ul><li>设置 input
<ul><li>line-height: normal;</li></ul></li></ul> <h3 id="_8-移动端-1px-的问题"><a href="#_8-移动端-1px-的问题" class="header-anchor">#</a> 8.移动端 1px 的问题</h3> <ul><li>产生原因: 设备像素被: dpr = window.devicePixelRatio = 物理像素 / 逻辑像素</li> <li>解决方案:
<ul><li><ol><li>0.5px</li></ol></li> <li><ol start="2"><li>viewport + rem</li></ol> <ul><li>同时通过设置对应 viewport 的 rem 基准值，这种方式就可以像以前一样轻松愉快的写 1px 了。</li> <li>在 devicePixelRatio = 2 时，设置 meta:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width,initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no&quot;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>在 devicePixelRatio = 3 时，设置 meta：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width,initial-scale=0.3333333333333333, maximum-scale=0.3333333333333333, minimum-scale=0.3333333333333333, user-scalable=no&quot;</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul> <h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> Webpack</h2> <h3 id="webpack-基础"><a href="#webpack-基础" class="header-anchor">#</a> webpack 基础</h3> <ul><li>entry(入口)</li> <li>output(出口)</li> <li>mode(模式)</li> <li>module(模块)</li> <li>plugins(插件)</li></ul> <h3 id="loader-是做什么用的"><a href="#loader-是做什么用的" class="header-anchor">#</a> loader 是做什么用的?</h3> <ul><li>webpack 默认只能处理 <code>js</code> 模块, 有了其他 loader,webpack 就能处理其他模块了</li></ul> <h3 id="plugins-是干嘛用的"><a href="#plugins-是干嘛用的" class="header-anchor">#</a> plugins 是干嘛用的?</h3> <ul><li>plugins 相当于在 webpack 的基础上添加的插件</li></ul> <h3 id="webapck-优化"><a href="#webapck-优化" class="header-anchor">#</a> webapck 优化</h3> <ul><li>通过 Gzip 压缩 compression-webpack-plugin</li> <li>通过 splitChunks 切割代码块</li> <li>生产上去掉 console (transform-remove-console)</li></ul> <h2 id="项目问题"><a href="#项目问题" class="header-anchor">#</a> 项目问题</h2> <h3 id="手机端"><a href="#手机端" class="header-anchor">#</a> 手机端</h3> <h4 id="多级-tab-切换"><a href="#多级-tab-切换" class="header-anchor">#</a> 多级 tab 切换</h4> <blockquote><p>项目难点</p></blockquote> <ul><li>之前的做法: 一级 tab 是死的, 二级 tab 三级 tab 详情是动态获取的, 这些状态需要保存, 当再次进入页面时,要回到之前的位置, 数据是请求二级 tab 回来之后,拿到二级 tab 第一级,再请求三级 tab,依次... , 这样做的坏处就是: 我要请求三次数据才能把数据全都取回来.每次点击的时候保存 localStorage , 如果不点击,默认取第一个数据</li> <li>现在的做法: 一次把所有数据都拿回来, 如果请求带了参数,就根据参数返回结果, 如果没有带参数,就返回默认值</li></ul> <h4 id="流程图"><a href="#流程图" class="header-anchor">#</a> 流程图</h4> <h3 id="canvastable"><a href="#canvastable" class="header-anchor">#</a> canvasTable</h3> <p>e.offsetX 鼠标相对于事件源元素（srcElement）的 X,Y 坐标
e.clientX 相对于浏览器窗口
onmousedown
onmouseup</p> <ul><li>绘画左边的 canvas</li> <li>绘画右边的 canvas</li> <li>绘画中间的 canvas(首先先把他们置为白色,然后再进行绘画)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 2.动态设置canvas画布的宽高</span>
cas<span class="token punctuation">.</span>width <span class="token operator">=</span> _gridWidth <span class="token operator">*</span> tableData<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 第一个表格的宽度 + 数组的长度</span>
cas<span class="token punctuation">.</span>height <span class="token operator">=</span> _gridHeight <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>高亮</li> <li>小地图</li> <li>小地图高亮</li> <li>通过 onscroll 事件(进行联动)</li></ul> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <h3 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h3> <h4 id="实现一个-object-assign"><a href="#实现一个-object-assign" class="header-anchor">#</a> 实现一个 Object.assign</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 为什么要用defineProperty? 因为通过defineProperty设置的值是不可修改的</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Object<span class="token punctuation">,</span> <span class="token string">'assign'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// value: 该属性对应的值。可以是任何有效的 JavaScript 值（数值，对象，函数等）</span>
  <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断这个对象是否为undefined或null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> target <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将所有类型转化为 Object; number类型会转化为Number.prototype 对象;字符串会转成对象 例如: 'name', 会转化为 {0:'n',1:'a',2:'m',3:'e'}</span>
    <span class="token keyword">var</span> to <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> source <span class="token operator">=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// 判断arguments[i],是否为undefined或null</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>source <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> source <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> sourceKey <span class="token keyword">in</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 为什么不用 source.hasOwnProperty(sourceKey), 因为如果是 string或者number类型 source;</span>
          <span class="token comment">// 如果source 是一个number类型,会报错,string类型的话一直都是false</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> sourceKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 赋值操作</span>
            to<span class="token punctuation">[</span>sourceKey<span class="token punctuation">]</span> <span class="token operator">=</span> source<span class="token punctuation">[</span>sourceKey<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//当且仅当该属性的 writable 键值为 true 时，属性的值，也就是上面的 value，才能被赋值运算符改变。</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//当且仅当该属性的 configurable 键值为 true 时，该属性的描述符才能够被改变，同时该属性也能从对应的对象上被删除</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="实现一个-array-slice"><a href="#实现一个-array-slice" class="header-anchor">#</a> 实现一个 Array.slice()</h4> <h2 id="项目难点-作业平台"><a href="#项目难点-作业平台" class="header-anchor">#</a> 项目难点 - 作业平台</h2> <h3 id="前端分页-模糊搜索及排序"><a href="#前端分页-模糊搜索及排序" class="header-anchor">#</a> 前端分页,模糊搜索及排序</h3> <ul><li><p>首先将这些功能放入一个组件中</p></li> <li><p>功能有: 1.分页 2 .1 模糊搜索,联合搜索.2 精确搜索,多 ip 换行搜索,(通过空格来匹配)3.选中当前页 4.选中所有页 5.通过 ip 进行排序,通过其他方式排序</p></li> <li><p>准备数据阶段</p></li> <li><p>在 props 中接收表格数据</p></li> <li><p>在 data 中设置 tableData 数组 缓存从 props 里的表格数据,方便修改,watch props 里的数组一有变化,赋值给 tableData</p></li> <li><p>在 data 中设置 searchData 数组 缓存搜索后的总数据,用于排序,修改数组</p></li> <li><p>在 data 中设置 cacheSearchData 数组,缓存搜索后的总数据,不动</p></li> <li><p>在 data 中设置 selectedData 数组, 缓存所有选中的数据</p></li> <li><p>在 data 中设置 isSearch boolean 值,判断是否是搜索状态
``</p></li> <li><p>在 computed 中计算出返回数据的总条数,totalNum,通过判断 isSearch 是拿 searchData 数组的长度还是 tableData 数组里的长度</p></li> <li><p>在 computed 中计算当前要展示的数据的那一页,currentData,也是判断 isSearch 是要展示 tableData 数组,还是展示 searchData 数组中的一页,通过 slice 方法 (this.currentPage-1) X this.pageSize, this.currentPage X this.pageSize</p></li> <li><p>逻辑处理阶段</p></li> <li><p>1.分页, 很好处理,使用 computed 中的 currentData 即可能拿到当前页</p></li> <li><p>2.模糊搜索,精确搜索,多 ip 换行搜索, 因为这些功能会多次用到,所以我将这三个搜索封装在公共的方法中(方法接收 array,key,返回 array 类型, 无 空数组)</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 模糊匹配
 * @param {Array} array
 * @param {String} key
 * @returns {Array}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fuzzyMatching</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> keyArr <span class="token operator">=</span> key
		<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
		<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>keyArr <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span>array <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token comment">// 如果是联合搜索</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>keyArr<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
			keyArr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">// 如果关键字搜索</span>
		<span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
			<span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
				Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">String</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>keyArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 多IP精确匹配
 * @param {Array} array
 * @param {String} str  字符串
 * @param {String} key 需要查找的对象属性名
 * @returns {Array}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">accurateMatching</span><span class="token punctuation">(</span><span class="token parameter">array<span class="token punctuation">,</span> str<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
		<span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
			str
				<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token comment">//切割成多个ip</span>
				<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//去掉首尾空格</span>
				<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">)</span> <span class="token comment">//过滤空行</span>
				<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><ul><li><p>3.选中当前页,选中所有, 这个饿了么有个配置 reserve-selection 设置为 true 时,他通过 selection-change 这个方法来监听数据选中的状态,但是他必须提供一个 key 值, 我是用的 ip 来当做 key 值,getRowKey(row) {return row.ip}那么就 通过 this.selectedData = rows, 然后当你点击的时候 通过 this.$refs.multipleTable.toggleRowSelection(changeSelect[i], true);, 就可以使 selection-change 触发,清除当前页也是一样. (2)选中所有的话, 需要分情况讨论, 选中 searchData 数据中的所有还是选中 table 数据中的所有,这时候就要通过 isSearch 来判断一下了</p></li> <li><p>说了这么多 isSearch , 那么 isSearch 的判断条件,通过 input 框改变触发,绑定的 input 事件.触发后,key.trim()之后判断是否为 true, 如果 trim()之后还是 true 的话,就让 this.isSearch 为 true ,否则为 false.</p></li> <li><p>searchData 的逻辑 判断 isSearch 是否为 true, 如果为 true 的话 就通过上面封装的函数,拿到搜索后的值,赋值给 searchData</p></li> <li><p>ip 排序和普通排序排序,首先, element 在需要排序的那一行设置 sortable=&quot;custom&quot; 给 table 设置自定义排序方法 @sort-change=&quot;handleSortChange&quot;, 他会传进来一个对象,对象中有两个属性 prop,order; prop-&gt;需要排序的属性名,order-&gt; element 会给三个值 null(不排序),ascending(升序),descending(降序); 处理逻辑 : 判断是否为 search 模式,如果是,判断 order 是否为 null 如果为 null 也就是不排序,那就拿 cacheSearchData 里的数据,否则就判断 是否按着 ip 排序,如果用 ip 排序,就用 ip 的排序算法,如果不是,则用普通的排序算法.如果 isSearch 为 false,则使用 this.tableData 处理逻辑一样</p> <blockquote><p>两个排序算法</p></blockquote></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 比较两个IP的大小
 * @param {String} key 对象中 ip的键
 * @param {String} order  排序方式 ascending 升序 ,descending 降序
 * @returns {Number} 1/0/-1
 * @ params{Object} obj1 进行比较的对象1
 * @ params{Object} obj2 进行比较的对象2
 *
 * 示例：
 * compareIP('1.1.1.1', '1.2.1.1'); // 返回-1
 * compareIP('13.37.11.11', '1.2.1.1'); // 返回1
 * compareIP('1.1.1.1', '1.1.1.1'); // 返回0
 *
 * 调用 list.sort(compareIP(prop, order));
 */</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">compareIP</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> order</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> arr1 <span class="token operator">=</span> obj1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> arr2 <span class="token operator">=</span> obj2<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span> arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">,</span> order</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>order <span class="token operator">===</span> <span class="token string">'ascending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>order <span class="token operator">===</span> <span class="token string">'descending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token function">compare</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">,</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> arr1<span class="token punctuation">,</span> arr2<span class="token punctuation">,</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * 比较两个值的大小
 * @param {String} key 对象中的键
 * @param {String} order  排序方式 ascending 升序 ,descending 降序
 * @returns {Number} 1/0/-1
 *
 * 默认和数组默认的sort排序一样的 排序算法
 * 调用 list.sort(compareNormal(prop, order));
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">compareSort</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> order</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>order <span class="token operator">===</span> <span class="token string">'ascending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&lt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&gt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 降序</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>order <span class="token operator">===</span> <span class="token string">'descending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&gt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&lt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><ul><li>最后优化,给input框使用防抖</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func， wait</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeout<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 指向全局</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context， args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// context.func(args)</span>
    <span class="token punctuation">}</span>， wait<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="项目中使用到的vuex-都是来储存什么的"><a href="#项目中使用到的vuex-都是来储存什么的" class="header-anchor">#</a> 项目中使用到的vuex 都是来储存什么的</h3> <ul><li>用户名</li> <li>权限</li> <li>token</li></ul> <blockquote><p>用到过module模式 在执行历史中,储存的有</p></blockquote> <ul><li>tableData, 表格数据</li> <li>selectMenus, 选中的数据</li> <li>currentLog, 实时日志</li> <li>currentIP, 当前选中的IP</li></ul> <h3 id="xterm-js"><a href="#xterm-js" class="header-anchor">#</a> xterm.js</h3> <ul><li>项目中有返回的liunx输出日志,通过xterm.js还原liunx命令窗口样式,在最上面添加了一行当前表格选中的ip</li></ul> <h2 id="手机端运维服务平台"><a href="#手机端运维服务平台" class="header-anchor">#</a> 手机端运维服务平台</h2> <h3 id="四级tab切换事件"><a href="#四级tab切换事件" class="header-anchor">#</a> 四级tab切换事件</h3> <blockquote><p>需求: 四级tab切换, 并保存状态 ,60刷新一下当前的数据
1.从保存状态的情况下分析</p></blockquote> <ul><li>从别的路由切回来
<ol><li>有状态(在localStorage中存的有)
从localStorage中拿</li> <li>无状态(首次进入, 没有设置localStorage)
拿到请求回来数据的第一个,去请求下一tab的数据并保存localStorage</li></ol></li> <li>在当前路由中点击
<ol><li><p>点击一级标题
获取一级tab的数据,拿到1级tab数据点击的,去获取第二个tab的数据,拿到第二个tab数据的第一个去获取第三个tab的数据,然后拿到第三个tab的第一个去请求详情,并储存</p></li> <li><p>点击二级标题
判断一级tab,有无在local中存储,有,则拿储存的,无则拿一级tab第一个数据</p></li> <li><p>点击三级标题</p></li></ol></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2022/10/23 18:24:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/questions/questionHistory/2021.01.html" class="prev">
            2021.01
          </a></span> <span class="next"><a href="/questions/questionHistory/2020.11.html">
            2020.11
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#css" class="sidebar-link reco-side-css" data-v-cb1513f6>CSS</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#布局方式" class="sidebar-link reco-side-布局方式" data-v-cb1513f6>布局方式</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#盒子模型" class="sidebar-link reco-side-盒子模型" data-v-cb1513f6>盒子模型</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#bfc-块级格式化上下文" class="sidebar-link reco-side-bfc-块级格式化上下文" data-v-cb1513f6>BFC 块级格式化上下文</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#弹性布局" class="sidebar-link reco-side-弹性布局" data-v-cb1513f6>弹性布局</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#js" class="sidebar-link reco-side-js" data-v-cb1513f6>JS</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#怎么理解闭包-只有-js-特有的属性" class="sidebar-link reco-side-怎么理解闭包-只有-js-特有的属性" data-v-cb1513f6>怎么理解闭包(只有 js 特有的属性)</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#递归" class="sidebar-link reco-side-递归" data-v-cb1513f6>递归</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#垃圾回收机制" class="sidebar-link reco-side-垃圾回收机制" data-v-cb1513f6>垃圾回收机制</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#介绍-dom-的三个阶段" class="sidebar-link reco-side-介绍-dom-的三个阶段" data-v-cb1513f6>介绍 DOM 的三个阶段</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#封装事件监听和解绑的兼容写法" class="sidebar-link reco-side-封装事件监听和解绑的兼容写法" data-v-cb1513f6>封装事件监听和解绑的兼容写法</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#原型与原型链" class="sidebar-link reco-side-原型与原型链" data-v-cb1513f6>原型与原型链</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#性能优化" class="sidebar-link reco-side-性能优化" data-v-cb1513f6>性能优化</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#渲染机制" class="sidebar-link reco-side-渲染机制" data-v-cb1513f6>渲染机制</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#http" class="sidebar-link reco-side-http" data-v-cb1513f6>HTTP</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#通讯类" class="sidebar-link reco-side-通讯类" data-v-cb1513f6>通讯类</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#安全类" class="sidebar-link reco-side-安全类" data-v-cb1513f6>安全类</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#前端性能优化的关键时间点" class="sidebar-link reco-side-前端性能优化的关键时间点" data-v-cb1513f6>前端性能优化的关键时间点</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#vue" class="sidebar-link reco-side-vue" data-v-cb1513f6>VUE</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#基础部分" class="sidebar-link reco-side-基础部分" data-v-cb1513f6>基础部分</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#内存泄漏" class="sidebar-link reco-side-内存泄漏" data-v-cb1513f6>内存泄漏</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#虚拟-dom" class="sidebar-link reco-side-虚拟-dom" data-v-cb1513f6>虚拟 DOM</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#兼容性问题" class="sidebar-link reco-side-兼容性问题" data-v-cb1513f6>兼容性问题</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_1-android-端文字未垂直居中" class="sidebar-link reco-side-_1-android-端文字未垂直居中" data-v-cb1513f6>1.Android 端文字未垂直居中</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_2-ios-页面底部-margin-bottom-失效" class="sidebar-link reco-side-_2-ios-页面底部-margin-bottom-失效" data-v-cb1513f6>2.ios 页面底部 margin-bottom 失效</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_3-ios-的-select-不能选择第一项" class="sidebar-link reco-side-_3-ios-的-select-不能选择第一项" data-v-cb1513f6>3.ios 的 select 不能选择第一项</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_4-输入法弹窗导致窗口变小" class="sidebar-link reco-side-_4-输入法弹窗导致窗口变小" data-v-cb1513f6>4.输入法弹窗导致窗口变小</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_5-absolute-定位元素被输入法顶起" class="sidebar-link reco-side-_5-absolute-定位元素被输入法顶起" data-v-cb1513f6>5.absolute 定位元素被输入法顶起</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_6-多行文本溢出隐藏时显示不全" class="sidebar-link reco-side-_6-多行文本溢出隐藏时显示不全" data-v-cb1513f6>6.多行文本溢出隐藏时显示不全</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_7-移动端-placeholder-不垂直居中的问题" class="sidebar-link reco-side-_7-移动端-placeholder-不垂直居中的问题" data-v-cb1513f6>7.移动端 placeholder 不垂直居中的问题</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#_8-移动端-1px-的问题" class="sidebar-link reco-side-_8-移动端-1px-的问题" data-v-cb1513f6>8.移动端 1px 的问题</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#webpack" class="sidebar-link reco-side-webpack" data-v-cb1513f6>Webpack</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#webpack-基础" class="sidebar-link reco-side-webpack-基础" data-v-cb1513f6>webpack 基础</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#loader-是做什么用的" class="sidebar-link reco-side-loader-是做什么用的" data-v-cb1513f6>loader 是做什么用的?</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#plugins-是干嘛用的" class="sidebar-link reco-side-plugins-是干嘛用的" data-v-cb1513f6>plugins 是干嘛用的?</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#webapck-优化" class="sidebar-link reco-side-webapck-优化" data-v-cb1513f6>webapck 优化</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#项目问题" class="sidebar-link reco-side-项目问题" data-v-cb1513f6>项目问题</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#手机端" class="sidebar-link reco-side-手机端" data-v-cb1513f6>手机端</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#canvastable" class="sidebar-link reco-side-canvastable" data-v-cb1513f6>canvasTable</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#其他" class="sidebar-link reco-side-其他" data-v-cb1513f6>其他</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#实现原理" class="sidebar-link reco-side-实现原理" data-v-cb1513f6>实现原理</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#项目难点-作业平台" class="sidebar-link reco-side-项目难点-作业平台" data-v-cb1513f6>项目难点 - 作业平台</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#前端分页-模糊搜索及排序" class="sidebar-link reco-side-前端分页-模糊搜索及排序" data-v-cb1513f6>前端分页,模糊搜索及排序</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#项目中使用到的vuex-都是来储存什么的" class="sidebar-link reco-side-项目中使用到的vuex-都是来储存什么的" data-v-cb1513f6>项目中使用到的vuex 都是来储存什么的</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#xterm-js" class="sidebar-link reco-side-xterm-js" data-v-cb1513f6>xterm.js</a></li><li class="level-2" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#手机端运维服务平台" class="sidebar-link reco-side-手机端运维服务平台" data-v-cb1513f6>手机端运维服务平台</a></li><li class="level-3" data-v-cb1513f6><a href="/questions/questionHistory/2020.12.html#四级tab切换事件" class="sidebar-link reco-side-四级tab切换事件" data-v-cb1513f6>四级tab切换事件</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 不露声色丶
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><canvas id="vuepress-canvas-cursor"></canvas><div></div></div></div>
    <script src="/assets/js/app.531756a1.js" defer></script><script src="/assets/js/3.956b1460.js" defer></script><script src="/assets/js/1.7962d709.js" defer></script><script src="/assets/js/55.c291de9c.js" defer></script>
  </body>
</html>
