---
# 主题列表：juejin, github, smartblue, cyanosis, channing-cyan, fancy, hydrogen, condensed-night-purple, greenwillow, v-green, vue-pro, healer-readable
# 贡献主题：https://github.com/xitu/juejin-markdown-themes
theme: juejin
highlight:
---

# 手撸系列

## new 操作符

### 首先要明白 new 到底做了哪几步操作？

1. 创建一个新对象
2. 将 this 指向这个新对象
3. 执行了构造函数
4. 返回新对象

### 对应的写法

```js
var myNew = function () {
  // 1.1创建一个新的对象
  const newObj = new Object();

  //1.2取得外部传入的构造函数
  const Constructor = [].shift.call(arguments);

  // 2.将 this 指向了这个新对象
  newObj.__proto__ = Constructor.prototype;

  // 3.执行这个构造函数
  const res = Constructor.apply(newObj, arguments);

  // 4.返回新对象
  return typeof res === 'object' && res !== null ? res : newObj;
};
```

### 使用

```js
var Person = function (name) {
  this.name = name;
};

Person.prototype.song = function () {
  console.log(`${this.name}在唱歌`);
};

const p = myNew(Person, 'Tom');
console.log(p.name); //打印: Tom
p.song(); // 打印: Tom在唱歌
```

### 需要注意的点

1. 为什么第 2 步的代码可以将 this 指向新的对象？
2. 为什么第 3 步是执行了这个构造函数？
3. 为什么第四部要这样返回对象？

- 首先我们了解查看构造函数是否有返回结果

## Function.prototype.call()

### 对应的写法

```js
Function.prototype.myCall = function (context) {
  // 判断传来的 context是否是一个简单类型值， 如果为简单类型 则转成对象
  context = context ? Object(context) : window;

  // 1.拿到被借用的函数
  context.fn = this;

  let args = [];

  // 2.将arguments取出放在数组里
  for (let i = 1; i < arguments.length; i++) {
    args.push('arguments[' + i + ']');
  }

  // 3.执行被借用的函数
  let r = eval('context.fn(' + args + ')');

  delete context.fn;

  // 4.返回执行后的结果
  return r;
};
```

### 使用

```js
var Person = function (name) {
  this.name = name;
};

Person.prototype.song = function () {
  console.log(`${this.name}在唱歌`);
};

function myNew() {
  const Constructor = [].shift.myCall(arguments);
  console.log(Constructor);
}

myNew(Person, 'Tom');
```

### 需要注意的点

## Function.prototype.apply()

### 对应的写法

```js
//对应的写法
```

### 使用

```js
//使用
```

### 需要注意的点

## Function.prototype.bind()

### 对应的写法

```js
//对应的写法
```

### 使用

```js
//使用
```

### 需要注意的点

## Object.create()

### 对应的写法

```js
Object.create =
  Object.create ||
  function () {
    var F = function () {};
    F.prototype = obj;
    return new F();
  };
```

### 使用

```js
var o = {
  name: 'ooo'
};
```

## 什么是 AOP 函数？

### 对应的写法

```js
//
```

### 使用

```js
//使用
```

### 需要注意的点

## 写在最后

> 第一次写文章，写的不好或者写的有误的地方，还望大家多多指正！
